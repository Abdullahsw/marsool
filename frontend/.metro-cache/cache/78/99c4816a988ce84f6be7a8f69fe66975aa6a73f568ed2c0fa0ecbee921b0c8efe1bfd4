{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":87,"index":132}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":133},"end":{"line":3,"column":40,"index":173}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useProducts\", {\n    enumerable: true,\n    get: function () {\n      return useProducts;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  const useProducts = (categoryId, limitCount = 20) => {\n    _s();\n    const [products, setProducts] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      fetchProducts();\n    }, [categoryId, limitCount]);\n    const fetchProducts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Simplified query without compound index requirement\n        const q = (0, _firebaseFirestore.query)((0, _firebaseFirestore.collection)(_configFirebase.db, 'products'), (0, _firebaseFirestore.limit)(100) // Get more products and filter in code\n        );\n        const querySnapshot = await (0, _firebaseFirestore.getDocs)(q);\n        const productsData = [];\n        querySnapshot.forEach(doc => {\n          const data = doc.data();\n\n          // Filter by category in code (if categoryId is provided and not 'all')\n          if (categoryId && categoryId !== 'all') {\n            // Check if product belongs to selected category\n            const productCategories = data.categories || [];\n            const productCategoryId = data.categoryId || '';\n\n            // Skip if doesn't match category\n            if (!productCategories.includes(categoryId) && productCategoryId !== categoryId) {\n              return;\n            }\n          }\n\n          // Handle multi-language name\n          let productName = '';\n          if (typeof data.name === 'string') {\n            productName = data.name;\n          } else if (data.name && typeof data.name === 'object') {\n            productName = data.name.ar || data.name.en || data.name.ku || '';\n          }\n\n          // Handle multi-language description\n          let productDescription = '';\n          if (typeof data.description === 'string') {\n            productDescription = data.description;\n          } else if (data.description && typeof data.description === 'object') {\n            productDescription = data.description.ar || data.description.en || data.description.ku || '';\n          }\n\n          // Get image URL - handle both single imageUrl and images array\n          let imageUrl = '';\n          if (data.imageUrl) {\n            imageUrl = data.imageUrl;\n          } else if (data.images && Array.isArray(data.images) && data.images.length > 0) {\n            imageUrl = data.images[0];\n          }\n\n          // Get status badge - use custom badge from Firebase or default based on stock\n          let statusText = '';\n          let statusBadge = data.badge; // Custom badge from Firebase (like \"حصري\", \"جديد\", etc.)\n\n          if (statusBadge && typeof statusBadge === 'object') {\n            // Handle multi-language badge\n            statusText = statusBadge.ar || statusBadge.en || statusBadge.ku || '';\n          } else if (typeof statusBadge === 'string') {\n            statusText = statusBadge;\n          } else {\n            // Default status based on stock\n            const stock = data.stock || 0;\n            if (stock > 20) {\n              statusText = 'متوفر';\n            } else if (stock > 0) {\n              statusText = 'كمية محدودة';\n            } else {\n              statusText = 'غير متوفر';\n            }\n          }\n          productsData.push({\n            id: doc.id,\n            name: productName,\n            imageUrl: imageUrl,\n            wholesalePrice: data.wholesalePrice || 0,\n            tags: data.tags || [],\n            status: statusText,\n            category: data.category,\n            stock: data.stock || 0,\n            minOrder: data.minOrder || 1,\n            description: productDescription\n          });\n        });\n\n        // Sort by creation date and limit results\n        productsData.sort((a, b) => {\n          // Since we can't sort by createdAt in query, we'll show all for now\n          return 0;\n        });\n\n        // Apply limit\n        const limitedProducts = productsData.slice(0, limitCount);\n        setProducts(limitedProducts);\n      } catch (err) {\n        console.error('Error fetching products:', err);\n        setError(err.message || 'حدث خطأ في جلب المنتجات');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refetch = () => {\n      fetchProducts();\n    };\n    return {\n      products,\n      loading,\n      error,\n      refetch\n    };\n  };\n  _s(useProducts, \"3+N/VFIgZOBgubN9oS5aTzm2qqY=\");\n});","lineCount":135,"map":[[8,2,18,0,"Object"],[8,8,18,0],[8,9,18,0,"defineProperty"],[8,23,18,0],[8,24,18,0,"exports"],[8,31,18,0],[9,4,18,0,"enumerable"],[9,14,18,0],[10,4,18,0,"get"],[10,7,18,0],[10,18,18,0,"get"],[10,19,18,0],[11,6,18,0],[11,13,18,0,"useProducts"],[11,24,18,0],[12,4,18,0],[13,2,18,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_firebaseFirestore"],[15,24,2,0],[15,27,2,0,"require"],[15,34,2,0],[15,35,2,0,"_dependencyMap"],[15,49,2,0],[16,2,3,0],[16,6,3,0,"_configFirebase"],[16,21,3,0],[16,24,3,0,"require"],[16,31,3,0],[16,32,3,0,"_dependencyMap"],[16,46,3,0],[17,2,18,7],[17,8,18,13,"useProducts"],[17,19,18,24],[17,22,18,27,"useProducts"],[17,23,18,28,"categoryId"],[17,33,18,47],[17,35,18,49,"limitCount"],[17,45,18,67],[17,48,18,70],[17,50,18,72],[17,55,18,77],[18,4,18,77,"_s"],[18,6,18,77],[19,4,19,2],[19,10,19,8],[19,11,19,9,"products"],[19,19,19,17],[19,21,19,19,"setProducts"],[19,32,19,30],[19,33,19,31],[19,36,19,34],[19,40,19,34,"useState"],[19,46,19,42],[19,47,19,42,"useState"],[19,55,19,42],[19,57,19,54],[19,59,19,56],[19,60,19,57],[20,4,20,2],[20,10,20,8],[20,11,20,9,"loading"],[20,18,20,16],[20,20,20,18,"setLoading"],[20,30,20,28],[20,31,20,29],[20,34,20,32],[20,38,20,32,"useState"],[20,44,20,40],[20,45,20,40,"useState"],[20,53,20,40],[20,55,20,41],[20,59,20,45],[20,60,20,46],[21,4,21,2],[21,10,21,8],[21,11,21,9,"error"],[21,16,21,14],[21,18,21,16,"setError"],[21,26,21,24],[21,27,21,25],[21,30,21,28],[21,34,21,28,"useState"],[21,40,21,36],[21,41,21,36,"useState"],[21,49,21,36],[21,51,21,52],[21,55,21,56],[21,56,21,57],[22,4,23,2],[22,8,23,2,"useEffect"],[22,14,23,11],[22,15,23,11,"useEffect"],[22,24,23,11],[22,26,23,12],[22,32,23,18],[23,6,24,4,"fetchProducts"],[23,19,24,17],[23,20,24,18],[23,21,24,19],[24,4,25,2],[24,5,25,3],[24,7,25,5],[24,8,25,6,"categoryId"],[24,18,25,16],[24,20,25,18,"limitCount"],[24,30,25,28],[24,31,25,29],[24,32,25,30],[25,4,27,2],[25,10,27,8,"fetchProducts"],[25,23,27,21],[25,26,27,24],[25,32,27,24,"fetchProducts"],[25,33,27,24],[25,38,27,36],[26,6,28,4],[26,10,28,8],[27,8,29,6,"setLoading"],[27,18,29,16],[27,19,29,17],[27,23,29,21],[27,24,29,22],[28,8,30,6,"setError"],[28,16,30,14],[28,17,30,15],[28,21,30,19],[28,22,30,20],[30,8,32,6],[31,8,33,6],[31,14,33,12,"q"],[31,15,33,13],[31,18,33,16],[31,22,33,16,"query"],[31,40,33,21],[31,41,33,21,"query"],[31,46,33,21],[31,48,34,8],[31,52,34,8,"collection"],[31,70,34,18],[31,71,34,18,"collection"],[31,81,34,18],[31,83,34,19,"db"],[31,98,34,21],[31,99,34,21,"db"],[31,101,34,21],[31,103,34,23],[31,113,34,33],[31,114,34,34],[31,116,35,8],[31,120,35,8,"limit"],[31,138,35,13],[31,139,35,13,"limit"],[31,144,35,13],[31,146,35,14],[31,149,35,17],[31,150,35,18],[31,151,35,19],[32,8,36,6],[32,9,36,7],[33,8,38,6],[33,14,38,12,"querySnapshot"],[33,27,38,25],[33,30,38,28],[33,36,38,34],[33,40,38,34,"getDocs"],[33,58,38,41],[33,59,38,41,"getDocs"],[33,66,38,41],[33,68,38,42,"q"],[33,69,38,43],[33,70,38,44],[34,8,39,6],[34,14,39,12,"productsData"],[34,26,39,35],[34,29,39,38],[34,31,39,40],[35,8,41,6,"querySnapshot"],[35,21,41,19],[35,22,41,20,"forEach"],[35,29,41,27],[35,30,41,29,"doc"],[35,33,41,32],[35,37,41,37],[36,10,42,8],[36,16,42,14,"data"],[36,20,42,18],[36,23,42,21,"doc"],[36,26,42,24],[36,27,42,25,"data"],[36,31,42,29],[36,32,42,30],[36,33,42,31],[38,10,44,8],[39,10,45,8],[39,14,45,12,"categoryId"],[39,24,45,22],[39,28,45,26,"categoryId"],[39,38,45,36],[39,43,45,41],[39,48,45,46],[39,50,45,48],[40,12,46,10],[41,12,47,10],[41,18,47,16,"productCategories"],[41,35,47,33],[41,38,47,36,"data"],[41,42,47,40],[41,43,47,41,"categories"],[41,53,47,51],[41,57,47,55],[41,59,47,57],[42,12,48,10],[42,18,48,16,"productCategoryId"],[42,35,48,33],[42,38,48,36,"data"],[42,42,48,40],[42,43,48,41,"categoryId"],[42,53,48,51],[42,57,48,55],[42,59,48,57],[44,12,50,10],[45,12,51,10],[45,16,51,14],[45,17,51,15,"productCategories"],[45,34,51,32],[45,35,51,33,"includes"],[45,43,51,41],[45,44,51,42,"categoryId"],[45,54,51,52],[45,55,51,53],[45,59,51,57,"productCategoryId"],[45,76,51,74],[45,81,51,79,"categoryId"],[45,91,51,89],[45,93,51,91],[46,14,52,12],[47,12,53,10],[48,10,54,8],[50,10,56,8],[51,10,57,8],[51,14,57,12,"productName"],[51,25,57,23],[51,28,57,26],[51,30,57,28],[52,10,58,8],[52,14,58,12],[52,21,58,19,"data"],[52,25,58,23],[52,26,58,24,"name"],[52,30,58,28],[52,35,58,33],[52,43,58,41],[52,45,58,43],[53,12,59,10,"productName"],[53,23,59,21],[53,26,59,24,"data"],[53,30,59,28],[53,31,59,29,"name"],[53,35,59,33],[54,10,60,8],[54,11,60,9],[54,17,60,15],[54,21,60,19,"data"],[54,25,60,23],[54,26,60,24,"name"],[54,30,60,28],[54,34,60,32],[54,41,60,39,"data"],[54,45,60,43],[54,46,60,44,"name"],[54,50,60,48],[54,55,60,53],[54,63,60,61],[54,65,60,63],[55,12,61,10,"productName"],[55,23,61,21],[55,26,61,24,"data"],[55,30,61,28],[55,31,61,29,"name"],[55,35,61,33],[55,36,61,34,"ar"],[55,38,61,36],[55,42,61,40,"data"],[55,46,61,44],[55,47,61,45,"name"],[55,51,61,49],[55,52,61,50,"en"],[55,54,61,52],[55,58,61,56,"data"],[55,62,61,60],[55,63,61,61,"name"],[55,67,61,65],[55,68,61,66,"ku"],[55,70,61,68],[55,74,61,72],[55,76,61,74],[56,10,62,8],[58,10,64,8],[59,10,65,8],[59,14,65,12,"productDescription"],[59,32,65,30],[59,35,65,33],[59,37,65,35],[60,10,66,8],[60,14,66,12],[60,21,66,19,"data"],[60,25,66,23],[60,26,66,24,"description"],[60,37,66,35],[60,42,66,40],[60,50,66,48],[60,52,66,50],[61,12,67,10,"productDescription"],[61,30,67,28],[61,33,67,31,"data"],[61,37,67,35],[61,38,67,36,"description"],[61,49,67,47],[62,10,68,8],[62,11,68,9],[62,17,68,15],[62,21,68,19,"data"],[62,25,68,23],[62,26,68,24,"description"],[62,37,68,35],[62,41,68,39],[62,48,68,46,"data"],[62,52,68,50],[62,53,68,51,"description"],[62,64,68,62],[62,69,68,67],[62,77,68,75],[62,79,68,77],[63,12,69,10,"productDescription"],[63,30,69,28],[63,33,69,31,"data"],[63,37,69,35],[63,38,69,36,"description"],[63,49,69,47],[63,50,69,48,"ar"],[63,52,69,50],[63,56,69,54,"data"],[63,60,69,58],[63,61,69,59,"description"],[63,72,69,70],[63,73,69,71,"en"],[63,75,69,73],[63,79,69,77,"data"],[63,83,69,81],[63,84,69,82,"description"],[63,95,69,93],[63,96,69,94,"ku"],[63,98,69,96],[63,102,69,100],[63,104,69,102],[64,10,70,8],[66,10,72,8],[67,10,73,8],[67,14,73,12,"imageUrl"],[67,22,73,20],[67,25,73,23],[67,27,73,25],[68,10,74,8],[68,14,74,12,"data"],[68,18,74,16],[68,19,74,17,"imageUrl"],[68,27,74,25],[68,29,74,27],[69,12,75,10,"imageUrl"],[69,20,75,18],[69,23,75,21,"data"],[69,27,75,25],[69,28,75,26,"imageUrl"],[69,36,75,34],[70,10,76,8],[70,11,76,9],[70,17,76,15],[70,21,76,19,"data"],[70,25,76,23],[70,26,76,24,"images"],[70,32,76,30],[70,36,76,34,"Array"],[70,41,76,39],[70,42,76,40,"isArray"],[70,49,76,47],[70,50,76,48,"data"],[70,54,76,52],[70,55,76,53,"images"],[70,61,76,59],[70,62,76,60],[70,66,76,64,"data"],[70,70,76,68],[70,71,76,69,"images"],[70,77,76,75],[70,78,76,76,"length"],[70,84,76,82],[70,87,76,85],[70,88,76,86],[70,90,76,88],[71,12,77,10,"imageUrl"],[71,20,77,18],[71,23,77,21,"data"],[71,27,77,25],[71,28,77,26,"images"],[71,34,77,32],[71,35,77,33],[71,36,77,34],[71,37,77,35],[72,10,78,8],[74,10,80,8],[75,10,81,8],[75,14,81,12,"statusText"],[75,24,81,22],[75,27,81,25],[75,29,81,27],[76,10,82,8],[76,14,82,12,"statusBadge"],[76,25,82,23],[76,28,82,26,"data"],[76,32,82,30],[76,33,82,31,"badge"],[76,38,82,36],[76,39,82,37],[76,40,82,38],[78,10,84,8],[78,14,84,12,"statusBadge"],[78,25,84,23],[78,29,84,27],[78,36,84,34,"statusBadge"],[78,47,84,45],[78,52,84,50],[78,60,84,58],[78,62,84,60],[79,12,85,10],[80,12,86,10,"statusText"],[80,22,86,20],[80,25,86,23,"statusBadge"],[80,36,86,34],[80,37,86,35,"ar"],[80,39,86,37],[80,43,86,41,"statusBadge"],[80,54,86,52],[80,55,86,53,"en"],[80,57,86,55],[80,61,86,59,"statusBadge"],[80,72,86,70],[80,73,86,71,"ku"],[80,75,86,73],[80,79,86,77],[80,81,86,79],[81,10,87,8],[81,11,87,9],[81,17,87,15],[81,21,87,19],[81,28,87,26,"statusBadge"],[81,39,87,37],[81,44,87,42],[81,52,87,50],[81,54,87,52],[82,12,88,10,"statusText"],[82,22,88,20],[82,25,88,23,"statusBadge"],[82,36,88,34],[83,10,89,8],[83,11,89,9],[83,17,89,15],[84,12,90,10],[85,12,91,10],[85,18,91,16,"stock"],[85,23,91,21],[85,26,91,24,"data"],[85,30,91,28],[85,31,91,29,"stock"],[85,36,91,34],[85,40,91,38],[85,41,91,39],[86,12,92,10],[86,16,92,14,"stock"],[86,21,92,19],[86,24,92,22],[86,26,92,24],[86,28,92,26],[87,14,93,12,"statusText"],[87,24,93,22],[87,27,93,25],[87,34,93,32],[88,12,94,10],[88,13,94,11],[88,19,94,17],[88,23,94,21,"stock"],[88,28,94,26],[88,31,94,29],[88,32,94,30],[88,34,94,32],[89,14,95,12,"statusText"],[89,24,95,22],[89,27,95,25],[89,40,95,38],[90,12,96,10],[90,13,96,11],[90,19,96,17],[91,14,97,12,"statusText"],[91,24,97,22],[91,27,97,25],[91,38,97,36],[92,12,98,10],[93,10,99,8],[94,10,101,8,"productsData"],[94,22,101,20],[94,23,101,21,"push"],[94,27,101,25],[94,28,101,26],[95,12,102,10,"id"],[95,14,102,12],[95,16,102,14,"doc"],[95,19,102,17],[95,20,102,18,"id"],[95,22,102,20],[96,12,103,10,"name"],[96,16,103,14],[96,18,103,16,"productName"],[96,29,103,27],[97,12,104,10,"imageUrl"],[97,20,104,18],[97,22,104,20,"imageUrl"],[97,30,104,28],[98,12,105,10,"wholesalePrice"],[98,26,105,24],[98,28,105,26,"data"],[98,32,105,30],[98,33,105,31,"wholesalePrice"],[98,47,105,45],[98,51,105,49],[98,52,105,50],[99,12,106,10,"tags"],[99,16,106,14],[99,18,106,16,"data"],[99,22,106,20],[99,23,106,21,"tags"],[99,27,106,25],[99,31,106,29],[99,33,106,31],[100,12,107,10,"status"],[100,18,107,16],[100,20,107,18,"statusText"],[100,30,107,28],[101,12,108,10,"category"],[101,20,108,18],[101,22,108,20,"data"],[101,26,108,24],[101,27,108,25,"category"],[101,35,108,33],[102,12,109,10,"stock"],[102,17,109,15],[102,19,109,17,"data"],[102,23,109,21],[102,24,109,22,"stock"],[102,29,109,27],[102,33,109,31],[102,34,109,32],[103,12,110,10,"minOrder"],[103,20,110,18],[103,22,110,20,"data"],[103,26,110,24],[103,27,110,25,"minOrder"],[103,35,110,33],[103,39,110,37],[103,40,110,38],[104,12,111,10,"description"],[104,23,111,21],[104,25,111,23,"productDescription"],[105,10,112,8],[105,11,112,9],[105,12,112,10],[106,8,113,6],[106,9,113,7],[106,10,113,8],[108,8,115,6],[109,8,116,6,"productsData"],[109,20,116,18],[109,21,116,19,"sort"],[109,25,116,23],[109,26,116,24],[109,27,116,25,"a"],[109,28,116,26],[109,30,116,28,"b"],[109,31,116,29],[109,36,116,34],[110,10,117,8],[111,10,118,8],[111,17,118,15],[111,18,118,16],[112,8,119,6],[112,9,119,7],[112,10,119,8],[114,8,121,6],[115,8,122,6],[115,14,122,12,"limitedProducts"],[115,29,122,27],[115,32,122,30,"productsData"],[115,44,122,42],[115,45,122,43,"slice"],[115,50,122,48],[115,51,122,49],[115,52,122,50],[115,54,122,52,"limitCount"],[115,64,122,62],[115,65,122,63],[116,8,124,6,"setProducts"],[116,19,124,17],[116,20,124,18,"limitedProducts"],[116,35,124,33],[116,36,124,34],[117,6,125,4],[117,7,125,5],[117,8,125,6],[117,15,125,13,"err"],[117,18,125,21],[117,20,125,23],[118,8,126,6,"console"],[118,15,126,13],[118,16,126,14,"error"],[118,21,126,19],[118,22,126,20],[118,48,126,46],[118,50,126,48,"err"],[118,53,126,51],[118,54,126,52],[119,8,127,6,"setError"],[119,16,127,14],[119,17,127,15,"err"],[119,20,127,18],[119,21,127,19,"message"],[119,28,127,26],[119,32,127,30],[119,57,127,55],[119,58,127,56],[120,6,128,4],[120,7,128,5],[120,16,128,14],[121,8,129,6,"setLoading"],[121,18,129,16],[121,19,129,17],[121,24,129,22],[121,25,129,23],[122,6,130,4],[123,4,131,2],[123,5,131,3],[124,4,133,2],[124,10,133,8,"refetch"],[124,17,133,15],[124,20,133,18,"refetch"],[124,21,133,18],[124,26,133,24],[125,6,134,4,"fetchProducts"],[125,19,134,17],[125,20,134,18],[125,21,134,19],[126,4,135,2],[126,5,135,3],[127,4,137,2],[127,11,137,9],[128,6,137,11,"products"],[128,14,137,19],[129,6,137,21,"loading"],[129,13,137,28],[130,6,137,30,"error"],[130,11,137,35],[131,6,137,37,"refetch"],[132,4,137,45],[132,5,137,46],[133,2,138,0],[133,3,138,1],[134,2,138,2,"_s"],[134,4,138,2],[134,5,18,13,"useProducts"],[134,16,18,24],[135,0,18,24],[135,3]],"functionMap":{"names":["<global>","useProducts","useEffect$argument_0","fetchProducts","querySnapshot.forEach$argument_0","productsData.sort$argument_0","refetch"],"mappings":"AAA;2BCiB;YCK;GDE;wBEE;4BCc;ODwE;wBEG;OFG;GFY;kBKE;GLE;CDG"},"hasCjsExports":false},"type":"js/module"}]}