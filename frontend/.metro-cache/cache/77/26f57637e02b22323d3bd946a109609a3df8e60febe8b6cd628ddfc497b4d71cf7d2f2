{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":15,"column":28,"index":219}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":220},"end":{"line":16,"column":40,"index":260}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":261},"end":{"line":17,"column":50,"index":311}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useOrders\", {\n    enumerable: true,\n    get: function () {\n      return useOrders;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  var _contextsAuthContext = require(_dependencyMap[3], \"../contexts/AuthContext\");\n  const useOrders = statusFilter => {\n    _s();\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const [orders, setOrders] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (!user) {\n        setOrders([]);\n        setLoading(false);\n        return;\n      }\n      setLoading(true);\n\n      // Build query\n      const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n      let q = (0, _firebaseFirestore.query)(ordersRef, (0, _firebaseFirestore.orderBy)('createdAt', 'desc'));\n\n      // Add status filter if provided\n      if (statusFilter && statusFilter !== 'all') {\n        q = (0, _firebaseFirestore.query)(q, (0, _firebaseFirestore.where)('status', '==', statusFilter));\n      }\n\n      // Subscribe to real-time updates\n      const unsubscribe = (0, _firebaseFirestore.onSnapshot)(q, snapshot => {\n        const ordersData = [];\n        snapshot.forEach(doc => {\n          ordersData.push({\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        console.log('üì¶ Orders loaded:', ordersData.length);\n        setOrders(ordersData);\n        setLoading(false);\n      }, err => {\n        console.error('‚ùå Error fetching orders:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n      return () => unsubscribe();\n    }, [user, statusFilter]);\n    const createOrder = async orderData => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        // Get next order number from counter\n        const counterRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'counters', 'orders');\n        const counterSnap = await (0, _firebaseFirestore.getDoc)(counterRef);\n        let orderNumber = 1;\n        if (counterSnap.exists()) {\n          orderNumber = (counterSnap.data().current || 0) + 1;\n        }\n\n        // Update counter\n        await (0, _firebaseFirestore.updateDoc)(counterRef, {\n          current: orderNumber\n        });\n\n        // Create order\n        const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n        const newOrder = {\n          ...orderData,\n          orderNumber,\n          userId: user.uid,\n          status: 'pending',\n          statusAr: 'ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',\n          createdAt: _firebaseFirestore.Timestamp.now(),\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        };\n        const docRef = await (0, _firebaseFirestore.addDoc)(ordersRef, newOrder);\n        console.log('‚úÖ Order created:', docRef.id);\n        return {\n          id: docRef.id,\n          ...newOrder\n        };\n      } catch (err) {\n        console.error('‚ùå Error creating order:', err);\n        throw err;\n      }\n    };\n    const updateOrderStatus = async (orderId, status, statusAr) => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        const orderRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'traders', user.uid, 'orders', orderId);\n        await (0, _firebaseFirestore.updateDoc)(orderRef, {\n          status,\n          statusAr,\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        });\n        console.log('‚úÖ Order status updated:', orderId, status);\n      } catch (err) {\n        console.error('‚ùå Error updating order status:', err);\n        throw err;\n      }\n    };\n    return {\n      orders,\n      loading,\n      error,\n      createOrder,\n      updateOrderStatus\n    };\n  };\n  _s(useOrders, \"e3Q6NPj8fUxeXiAUE8uJxbJEzPo=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":126,"map":[[8,2,61,0,"Object"],[8,8,61,0],[8,9,61,0,"defineProperty"],[8,23,61,0],[8,24,61,0,"exports"],[8,31,61,0],[9,4,61,0,"enumerable"],[9,14,61,0],[10,4,61,0,"get"],[10,7,61,0],[10,18,61,0,"get"],[10,19,61,0],[11,6,61,0],[11,13,61,0,"useOrders"],[11,22,61,0],[12,4,61,0],[13,2,61,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_firebaseFirestore"],[15,24,2,0],[15,27,2,0,"require"],[15,34,2,0],[15,35,2,0,"_dependencyMap"],[15,49,2,0],[16,2,16,0],[16,6,16,0,"_configFirebase"],[16,21,16,0],[16,24,16,0,"require"],[16,31,16,0],[16,32,16,0,"_dependencyMap"],[16,46,16,0],[17,2,17,0],[17,6,17,0,"_contextsAuthContext"],[17,26,17,0],[17,29,17,0,"require"],[17,36,17,0],[17,37,17,0,"_dependencyMap"],[17,51,17,0],[18,2,61,7],[18,8,61,13,"useOrders"],[18,17,61,22],[18,20,61,26,"statusFilter"],[18,32,61,47],[18,36,61,52],[19,4,61,52,"_s"],[19,6,61,52],[20,4,62,2],[20,10,62,8],[21,6,62,10,"user"],[22,4,62,15],[22,5,62,16],[22,8,62,19],[22,12,62,19,"useAuth"],[22,32,62,26],[22,33,62,26,"useAuth"],[22,40,62,26],[22,42,62,27],[22,43,62,28],[23,4,63,2],[23,10,63,8],[23,11,63,9,"orders"],[23,17,63,15],[23,19,63,17,"setOrders"],[23,28,63,26],[23,29,63,27],[23,32,63,30],[23,36,63,30,"useState"],[23,42,63,38],[23,43,63,38,"useState"],[23,51,63,38],[23,53,63,48],[23,55,63,50],[23,56,63,51],[24,4,64,2],[24,10,64,8],[24,11,64,9,"loading"],[24,18,64,16],[24,20,64,18,"setLoading"],[24,30,64,28],[24,31,64,29],[24,34,64,32],[24,38,64,32,"useState"],[24,44,64,40],[24,45,64,40,"useState"],[24,53,64,40],[24,55,64,41],[24,59,64,45],[24,60,64,46],[25,4,65,2],[25,10,65,8],[25,11,65,9,"error"],[25,16,65,14],[25,18,65,16,"setError"],[25,26,65,24],[25,27,65,25],[25,30,65,28],[25,34,65,28,"useState"],[25,40,65,36],[25,41,65,36,"useState"],[25,49,65,36],[25,51,65,52],[25,55,65,56],[25,56,65,57],[26,4,67,2],[26,8,67,2,"useEffect"],[26,14,67,11],[26,15,67,11,"useEffect"],[26,24,67,11],[26,26,67,12],[26,32,67,18],[27,6,68,4],[27,10,68,8],[27,11,68,9,"user"],[27,15,68,13],[27,17,68,15],[28,8,69,6,"setOrders"],[28,17,69,15],[28,18,69,16],[28,20,69,18],[28,21,69,19],[29,8,70,6,"setLoading"],[29,18,70,16],[29,19,70,17],[29,24,70,22],[29,25,70,23],[30,8,71,6],[31,6,72,4],[32,6,74,4,"setLoading"],[32,16,74,14],[32,17,74,15],[32,21,74,19],[32,22,74,20],[34,6,76,4],[35,6,77,4],[35,12,77,10,"ordersRef"],[35,21,77,19],[35,24,77,22],[35,28,77,22,"collection"],[35,46,77,32],[35,47,77,32,"collection"],[35,57,77,32],[35,59,77,33,"db"],[35,74,77,35],[35,75,77,35,"db"],[35,77,77,35],[35,79,77,37],[35,88,77,46],[35,90,77,48,"user"],[35,94,77,52],[35,95,77,53,"uid"],[35,98,77,56],[35,100,77,58],[35,108,77,66],[35,109,77,67],[36,6,78,4],[36,10,78,8,"q"],[36,11,78,9],[36,14,78,12],[36,18,78,12,"query"],[36,36,78,17],[36,37,78,17,"query"],[36,42,78,17],[36,44,79,6,"ordersRef"],[36,53,79,15],[36,55,80,6],[36,59,80,6,"orderBy"],[36,77,80,13],[36,78,80,13,"orderBy"],[36,85,80,13],[36,87,80,14],[36,98,80,25],[36,100,80,27],[36,106,80,33],[36,107,81,4],[36,108,81,5],[38,6,83,4],[39,6,84,4],[39,10,84,8,"statusFilter"],[39,22,84,20],[39,26,84,24,"statusFilter"],[39,38,84,36],[39,43,84,41],[39,48,84,46],[39,50,84,48],[40,8,85,6,"q"],[40,9,85,7],[40,12,85,10],[40,16,85,10,"query"],[40,34,85,15],[40,35,85,15,"query"],[40,40,85,15],[40,42,85,16,"q"],[40,43,85,17],[40,45,85,19],[40,49,85,19,"where"],[40,67,85,24],[40,68,85,24,"where"],[40,73,85,24],[40,75,85,25],[40,83,85,33],[40,85,85,35],[40,89,85,39],[40,91,85,41,"statusFilter"],[40,103,85,53],[40,104,85,54],[40,105,85,55],[41,6,86,4],[43,6,88,4],[44,6,89,4],[44,12,89,10,"unsubscribe"],[44,23,89,21],[44,26,89,24],[44,30,89,24,"onSnapshot"],[44,48,89,34],[44,49,89,34,"onSnapshot"],[44,59,89,34],[44,61,90,6,"q"],[44,62,90,7],[44,64,91,7,"snapshot"],[44,72,91,15],[44,76,91,20],[45,8,92,8],[45,14,92,14,"ordersData"],[45,24,92,33],[45,27,92,36],[45,29,92,38],[46,8,93,8,"snapshot"],[46,16,93,16],[46,17,93,17,"forEach"],[46,24,93,24],[46,25,93,26,"doc"],[46,28,93,29],[46,32,93,34],[47,10,94,10,"ordersData"],[47,20,94,20],[47,21,94,21,"push"],[47,25,94,25],[47,26,94,26],[48,12,95,12,"id"],[48,14,95,14],[48,16,95,16,"doc"],[48,19,95,19],[48,20,95,20,"id"],[48,22,95,22],[49,12,96,12],[49,15,96,15,"doc"],[49,18,96,18],[49,19,96,19,"data"],[49,23,96,23],[49,24,96,24],[50,10,97,10],[50,11,97,20],[50,12,97,21],[51,8,98,8],[51,9,98,9],[51,10,98,10],[52,8,100,8,"console"],[52,15,100,15],[52,16,100,16,"log"],[52,19,100,19],[52,20,100,20],[52,39,100,39],[52,41,100,41,"ordersData"],[52,51,100,51],[52,52,100,52,"length"],[52,58,100,58],[52,59,100,59],[53,8,101,8,"setOrders"],[53,17,101,17],[53,18,101,18,"ordersData"],[53,28,101,28],[53,29,101,29],[54,8,102,8,"setLoading"],[54,18,102,18],[54,19,102,19],[54,24,102,24],[54,25,102,25],[55,6,103,6],[55,7,103,7],[55,9,104,7,"err"],[55,12,104,10],[55,16,104,15],[56,8,105,8,"console"],[56,15,105,15],[56,16,105,16,"error"],[56,21,105,21],[56,22,105,22],[56,48,105,48],[56,50,105,50,"err"],[56,53,105,53],[56,54,105,54],[57,8,106,8,"setError"],[57,16,106,16],[57,17,106,17,"err"],[57,20,106,20],[57,21,106,21,"message"],[57,28,106,28],[57,29,106,29],[58,8,107,8,"setLoading"],[58,18,107,18],[58,19,107,19],[58,24,107,24],[58,25,107,25],[59,6,108,6],[59,7,109,4],[59,8,109,5],[60,6,111,4],[60,13,111,11],[60,19,111,17,"unsubscribe"],[60,30,111,28],[60,31,111,29],[60,32,111,30],[61,4,112,2],[61,5,112,3],[61,7,112,5],[61,8,112,6,"user"],[61,12,112,10],[61,14,112,12,"statusFilter"],[61,26,112,24],[61,27,112,25],[61,28,112,26],[62,4,114,2],[62,10,114,8,"createOrder"],[62,21,114,19],[62,24,114,22],[62,30,114,29,"orderData"],[62,39,114,112],[62,43,114,117],[63,6,115,4],[63,10,115,8],[63,11,115,9,"user"],[63,15,115,13],[63,17,115,15],[63,23,115,21],[63,27,115,25,"Error"],[63,32,115,30],[63,33,115,31],[63,57,115,55],[63,58,115,56],[64,6,117,4],[64,10,117,8],[65,8,118,6],[66,8,119,6],[66,14,119,12,"counterRef"],[66,24,119,22],[66,27,119,25],[66,31,119,25,"doc"],[66,49,119,28],[66,50,119,28,"doc"],[66,53,119,28],[66,55,119,29,"db"],[66,70,119,31],[66,71,119,31,"db"],[66,73,119,31],[66,75,119,33],[66,85,119,43],[66,87,119,45],[66,95,119,53],[66,96,119,54],[67,8,120,6],[67,14,120,12,"counterSnap"],[67,25,120,23],[67,28,120,26],[67,34,120,32],[67,38,120,32,"getDoc"],[67,56,120,38],[67,57,120,38,"getDoc"],[67,63,120,38],[67,65,120,39,"counterRef"],[67,75,120,49],[67,76,120,50],[68,8,122,6],[68,12,122,10,"orderNumber"],[68,23,122,21],[68,26,122,24],[68,27,122,25],[69,8,123,6],[69,12,123,10,"counterSnap"],[69,23,123,21],[69,24,123,22,"exists"],[69,30,123,28],[69,31,123,29],[69,32,123,30],[69,34,123,32],[70,10,124,8,"orderNumber"],[70,21,124,19],[70,24,124,22],[70,25,124,23,"counterSnap"],[70,36,124,34],[70,37,124,35,"data"],[70,41,124,39],[70,42,124,40],[70,43,124,41],[70,44,124,42,"current"],[70,51,124,49],[70,55,124,53],[70,56,124,54],[70,60,124,58],[70,61,124,59],[71,8,125,6],[73,8,127,6],[74,8,128,6],[74,14,128,12],[74,18,128,12,"updateDoc"],[74,36,128,21],[74,37,128,21,"updateDoc"],[74,46,128,21],[74,48,128,22,"counterRef"],[74,58,128,32],[74,60,128,34],[75,10,129,8,"current"],[75,17,129,15],[75,19,129,17,"orderNumber"],[76,8,130,6],[76,9,130,7],[76,10,130,8],[78,8,132,6],[79,8,133,6],[79,14,133,12,"ordersRef"],[79,23,133,21],[79,26,133,24],[79,30,133,24,"collection"],[79,48,133,34],[79,49,133,34,"collection"],[79,59,133,34],[79,61,133,35,"db"],[79,76,133,37],[79,77,133,37,"db"],[79,79,133,37],[79,81,133,39],[79,90,133,48],[79,92,133,50,"user"],[79,96,133,54],[79,97,133,55,"uid"],[79,100,133,58],[79,102,133,60],[79,110,133,68],[79,111,133,69],[80,8,134,6],[80,14,134,12,"newOrder"],[80,22,134,20],[80,25,134,23],[81,10,135,8],[81,13,135,11,"orderData"],[81,22,135,20],[82,10,136,8,"orderNumber"],[82,21,136,19],[83,10,137,8,"userId"],[83,16,137,14],[83,18,137,16,"user"],[83,22,137,20],[83,23,137,21,"uid"],[83,26,137,24],[84,10,138,8,"status"],[84,16,138,14],[84,18,138,16],[84,27,138,25],[85,10,139,8,"statusAr"],[85,18,139,16],[85,20,139,18],[85,34,139,32],[86,10,140,8,"createdAt"],[86,19,140,17],[86,21,140,19,"Timestamp"],[86,39,140,28],[86,40,140,28,"Timestamp"],[86,49,140,28],[86,50,140,29,"now"],[86,53,140,32],[86,54,140,33],[86,55,140,34],[87,10,141,8,"updatedAt"],[87,19,141,17],[87,21,141,19,"Timestamp"],[87,39,141,28],[87,40,141,28,"Timestamp"],[87,49,141,28],[87,50,141,29,"now"],[87,53,141,32],[87,54,141,33],[88,8,142,6],[88,9,142,7],[89,8,144,6],[89,14,144,12,"docRef"],[89,20,144,18],[89,23,144,21],[89,29,144,27],[89,33,144,27,"addDoc"],[89,51,144,33],[89,52,144,33,"addDoc"],[89,58,144,33],[89,60,144,34,"ordersRef"],[89,69,144,43],[89,71,144,45,"newOrder"],[89,79,144,53],[89,80,144,54],[90,8,146,6,"console"],[90,15,146,13],[90,16,146,14,"log"],[90,19,146,17],[90,20,146,18],[90,38,146,36],[90,40,146,38,"docRef"],[90,46,146,44],[90,47,146,45,"id"],[90,49,146,47],[90,50,146,48],[91,8,147,6],[91,15,147,13],[92,10,148,8,"id"],[92,12,148,10],[92,14,148,12,"docRef"],[92,20,148,18],[92,21,148,19,"id"],[92,23,148,21],[93,10,149,8],[93,13,149,11,"newOrder"],[94,8,150,6],[94,9,150,7],[95,6,151,4],[95,7,151,5],[95,8,151,6],[95,15,151,13,"err"],[95,18,151,21],[95,20,151,23],[96,8,152,6,"console"],[96,15,152,13],[96,16,152,14,"error"],[96,21,152,19],[96,22,152,20],[96,47,152,45],[96,49,152,47,"err"],[96,52,152,50],[96,53,152,51],[97,8,153,6],[97,14,153,12,"err"],[97,17,153,15],[98,6,154,4],[99,4,155,2],[99,5,155,3],[100,4,157,2],[100,10,157,8,"updateOrderStatus"],[100,27,157,25],[100,30,157,28],[100,36,157,28,"updateOrderStatus"],[100,37,157,35,"orderId"],[100,44,157,50],[100,46,157,52,"status"],[100,52,157,66],[100,54,157,68,"statusAr"],[100,62,157,84],[100,67,157,89],[101,6,158,4],[101,10,158,8],[101,11,158,9,"user"],[101,15,158,13],[101,17,158,15],[101,23,158,21],[101,27,158,25,"Error"],[101,32,158,30],[101,33,158,31],[101,57,158,55],[101,58,158,56],[102,6,160,4],[102,10,160,8],[103,8,161,6],[103,14,161,12,"orderRef"],[103,22,161,20],[103,25,161,23],[103,29,161,23,"doc"],[103,47,161,26],[103,48,161,26,"doc"],[103,51,161,26],[103,53,161,27,"db"],[103,68,161,29],[103,69,161,29,"db"],[103,71,161,29],[103,73,161,31],[103,82,161,40],[103,84,161,42,"user"],[103,88,161,46],[103,89,161,47,"uid"],[103,92,161,50],[103,94,161,52],[103,102,161,60],[103,104,161,62,"orderId"],[103,111,161,69],[103,112,161,70],[104,8,162,6],[104,14,162,12],[104,18,162,12,"updateDoc"],[104,36,162,21],[104,37,162,21,"updateDoc"],[104,46,162,21],[104,48,162,22,"orderRef"],[104,56,162,30],[104,58,162,32],[105,10,163,8,"status"],[105,16,163,14],[106,10,164,8,"statusAr"],[106,18,164,16],[107,10,165,8,"updatedAt"],[107,19,165,17],[107,21,165,19,"Timestamp"],[107,39,165,28],[107,40,165,28,"Timestamp"],[107,49,165,28],[107,50,165,29,"now"],[107,53,165,32],[107,54,165,33],[108,8,166,6],[108,9,166,7],[108,10,166,8],[109,8,168,6,"console"],[109,15,168,13],[109,16,168,14,"log"],[109,19,168,17],[109,20,168,18],[109,45,168,43],[109,47,168,45,"orderId"],[109,54,168,52],[109,56,168,54,"status"],[109,62,168,60],[109,63,168,61],[110,6,169,4],[110,7,169,5],[110,8,169,6],[110,15,169,13,"err"],[110,18,169,21],[110,20,169,23],[111,8,170,6,"console"],[111,15,170,13],[111,16,170,14,"error"],[111,21,170,19],[111,22,170,20],[111,54,170,52],[111,56,170,54,"err"],[111,59,170,57],[111,60,170,58],[112,8,171,6],[112,14,171,12,"err"],[112,17,171,15],[113,6,172,4],[114,4,173,2],[114,5,173,3],[115,4,175,2],[115,11,175,9],[116,6,176,4,"orders"],[116,12,176,10],[117,6,177,4,"loading"],[117,13,177,11],[118,6,178,4,"error"],[118,11,178,9],[119,6,179,4,"createOrder"],[119,17,179,15],[120,6,180,4,"updateOrderStatus"],[121,4,181,2],[121,5,181,3],[122,2,182,0],[122,3,182,1],[123,2,182,2,"_s"],[123,4,182,2],[123,5,61,13,"useOrders"],[123,14,61,22],[124,4,61,22],[124,12,62,19,"useAuth"],[124,32,62,26],[124,33,62,26,"useAuth"],[124,40,62,26],[125,2,62,26],[126,0,62,26],[126,3]],"functionMap":{"names":["<global>","useOrders","useEffect$argument_0","onSnapshot$argument_1","snapshot.forEach$argument_0","onSnapshot$argument_2","<anonymous>","createOrder","updateOrderStatus"],"mappings":"AAA;yBC4D;YCM;MCwB;yBCE;SDK;ODK;MGC;OHI;WIG,mBJ;GDC;sBME;GNyC;4BOE;GPgB;CDS"},"hasCjsExports":false},"type":"js/module"}]}