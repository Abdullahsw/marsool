{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":15,"column":28,"index":219}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":220},"end":{"line":16,"column":40,"index":260}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":261},"end":{"line":17,"column":50,"index":311}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useOrders\", {\n    enumerable: true,\n    get: function () {\n      return useOrders;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  var _contextsAuthContext = require(_dependencyMap[3], \"../contexts/AuthContext\");\n  const useOrders = statusFilter => {\n    _s();\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const [orders, setOrders] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (!user) {\n        setOrders([]);\n        setLoading(false);\n        return;\n      }\n      setLoading(true);\n\n      // Build query\n      const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n      let q = (0, _firebaseFirestore.query)(ordersRef, (0, _firebaseFirestore.orderBy)('createdAt', 'desc'));\n\n      // Add status filter if provided\n      if (statusFilter && statusFilter !== 'all') {\n        q = (0, _firebaseFirestore.query)(q, (0, _firebaseFirestore.where)('status', '==', statusFilter));\n      }\n\n      // Subscribe to real-time updates\n      const unsubscribe = (0, _firebaseFirestore.onSnapshot)(q, snapshot => {\n        const ordersData = [];\n        snapshot.forEach(doc => {\n          ordersData.push(Object.assign({\n            id: doc.id\n          }, doc.data()));\n        });\n        console.log('üì¶ Orders loaded:', ordersData.length);\n        setOrders(ordersData);\n        setLoading(false);\n      }, err => {\n        console.error('‚ùå Error fetching orders:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n      return () => unsubscribe();\n    }, [user, statusFilter]);\n    const createOrder = async orderData => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        // Get next order number from counter\n        const counterRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'counters', 'orders');\n        const counterSnap = await (0, _firebaseFirestore.getDoc)(counterRef);\n        let orderNumber = 1;\n        if (counterSnap.exists()) {\n          orderNumber = (counterSnap.data().current || 0) + 1;\n        }\n\n        // Update counter\n        await (0, _firebaseFirestore.updateDoc)(counterRef, {\n          current: orderNumber\n        });\n\n        // Create order\n        const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n        const newOrder = Object.assign({}, orderData, {\n          orderNumber,\n          userId: user.uid,\n          status: 'pending',\n          statusAr: 'ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',\n          createdAt: _firebaseFirestore.Timestamp.now(),\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        });\n        const docRef = await (0, _firebaseFirestore.addDoc)(ordersRef, newOrder);\n        console.log('‚úÖ Order created:', docRef.id);\n        return Object.assign({\n          id: docRef.id\n        }, newOrder);\n      } catch (err) {\n        console.error('‚ùå Error creating order:', err);\n        throw err;\n      }\n    };\n    const updateOrderStatus = async (orderId, status, statusAr) => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        const orderRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'traders', user.uid, 'orders', orderId);\n        await (0, _firebaseFirestore.updateDoc)(orderRef, {\n          status,\n          statusAr,\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        });\n        console.log('‚úÖ Order status updated:', orderId, status);\n      } catch (err) {\n        console.error('‚ùå Error updating order status:', err);\n        throw err;\n      }\n    };\n    return {\n      orders,\n      loading,\n      error,\n      createOrder,\n      updateOrderStatus\n    };\n  };\n  _s(useOrders, \"e3Q6NPj8fUxeXiAUE8uJxbJEzPo=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":123,"map":[[8,2,61,0,"Object"],[8,8,61,0],[8,9,61,0,"defineProperty"],[8,23,61,0],[8,24,61,0,"exports"],[8,31,61,0],[9,4,61,0,"enumerable"],[9,14,61,0],[10,4,61,0,"get"],[10,7,61,0],[10,18,61,0,"get"],[10,19,61,0],[11,6,61,0],[11,13,61,0,"useOrders"],[11,22,61,0],[12,4,61,0],[13,2,61,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,2,0],[15,6,2,0,"_firebaseFirestore"],[15,24,2,0],[15,27,2,0,"require"],[15,34,2,0],[15,35,2,0,"_dependencyMap"],[15,49,2,0],[16,2,16,0],[16,6,16,0,"_configFirebase"],[16,21,16,0],[16,24,16,0,"require"],[16,31,16,0],[16,32,16,0,"_dependencyMap"],[16,46,16,0],[17,2,17,0],[17,6,17,0,"_contextsAuthContext"],[17,26,17,0],[17,29,17,0,"require"],[17,36,17,0],[17,37,17,0,"_dependencyMap"],[17,51,17,0],[18,2,61,7],[18,8,61,13,"useOrders"],[18,17,61,22],[18,20,61,26,"statusFilter"],[18,32,61,47],[18,36,61,52],[19,4,61,52,"_s"],[19,6,61,52],[20,4,62,2],[20,10,62,8],[21,6,62,10,"user"],[22,4,62,15],[22,5,62,16],[22,8,62,19],[22,12,62,19,"useAuth"],[22,32,62,26],[22,33,62,26,"useAuth"],[22,40,62,26],[22,42,62,27],[22,43,62,28],[23,4,63,2],[23,10,63,8],[23,11,63,9,"orders"],[23,17,63,15],[23,19,63,17,"setOrders"],[23,28,63,26],[23,29,63,27],[23,32,63,30],[23,36,63,30,"useState"],[23,42,63,38],[23,43,63,38,"useState"],[23,51,63,38],[23,53,63,48],[23,55,63,50],[23,56,63,51],[24,4,64,2],[24,10,64,8],[24,11,64,9,"loading"],[24,18,64,16],[24,20,64,18,"setLoading"],[24,30,64,28],[24,31,64,29],[24,34,64,32],[24,38,64,32,"useState"],[24,44,64,40],[24,45,64,40,"useState"],[24,53,64,40],[24,55,64,41],[24,59,64,45],[24,60,64,46],[25,4,65,2],[25,10,65,8],[25,11,65,9,"error"],[25,16,65,14],[25,18,65,16,"setError"],[25,26,65,24],[25,27,65,25],[25,30,65,28],[25,34,65,28,"useState"],[25,40,65,36],[25,41,65,36,"useState"],[25,49,65,36],[25,51,65,52],[25,55,65,56],[25,56,65,57],[26,4,67,2],[26,8,67,2,"useEffect"],[26,14,67,11],[26,15,67,11,"useEffect"],[26,24,67,11],[26,26,67,12],[26,32,67,18],[27,6,68,4],[27,10,68,8],[27,11,68,9,"user"],[27,15,68,13],[27,17,68,15],[28,8,69,6,"setOrders"],[28,17,69,15],[28,18,69,16],[28,20,69,18],[28,21,69,19],[29,8,70,6,"setLoading"],[29,18,70,16],[29,19,70,17],[29,24,70,22],[29,25,70,23],[30,8,71,6],[31,6,72,4],[32,6,74,4,"setLoading"],[32,16,74,14],[32,17,74,15],[32,21,74,19],[32,22,74,20],[34,6,76,4],[35,6,77,4],[35,12,77,10,"ordersRef"],[35,21,77,19],[35,24,77,22],[35,28,77,22,"collection"],[35,46,77,32],[35,47,77,32,"collection"],[35,57,77,32],[35,59,77,33,"db"],[35,74,77,35],[35,75,77,35,"db"],[35,77,77,35],[35,79,77,37],[35,88,77,46],[35,90,77,48,"user"],[35,94,77,52],[35,95,77,53,"uid"],[35,98,77,56],[35,100,77,58],[35,108,77,66],[35,109,77,67],[36,6,78,4],[36,10,78,8,"q"],[36,11,78,9],[36,14,78,12],[36,18,78,12,"query"],[36,36,78,17],[36,37,78,17,"query"],[36,42,78,17],[36,44,79,6,"ordersRef"],[36,53,79,15],[36,55,80,6],[36,59,80,6,"orderBy"],[36,77,80,13],[36,78,80,13,"orderBy"],[36,85,80,13],[36,87,80,14],[36,98,80,25],[36,100,80,27],[36,106,80,33],[36,107,81,4],[36,108,81,5],[38,6,83,4],[39,6,84,4],[39,10,84,8,"statusFilter"],[39,22,84,20],[39,26,84,24,"statusFilter"],[39,38,84,36],[39,43,84,41],[39,48,84,46],[39,50,84,48],[40,8,85,6,"q"],[40,9,85,7],[40,12,85,10],[40,16,85,10,"query"],[40,34,85,15],[40,35,85,15,"query"],[40,40,85,15],[40,42,85,16,"q"],[40,43,85,17],[40,45,85,19],[40,49,85,19,"where"],[40,67,85,24],[40,68,85,24,"where"],[40,73,85,24],[40,75,85,25],[40,83,85,33],[40,85,85,35],[40,89,85,39],[40,91,85,41,"statusFilter"],[40,103,85,53],[40,104,85,54],[40,105,85,55],[41,6,86,4],[43,6,88,4],[44,6,89,4],[44,12,89,10,"unsubscribe"],[44,23,89,21],[44,26,89,24],[44,30,89,24,"onSnapshot"],[44,48,89,34],[44,49,89,34,"onSnapshot"],[44,59,89,34],[44,61,90,6,"q"],[44,62,90,7],[44,64,91,7,"snapshot"],[44,72,91,15],[44,76,91,20],[45,8,92,8],[45,14,92,14,"ordersData"],[45,24,92,33],[45,27,92,36],[45,29,92,38],[46,8,93,8,"snapshot"],[46,16,93,16],[46,17,93,17,"forEach"],[46,24,93,24],[46,25,93,26,"doc"],[46,28,93,29],[46,32,93,34],[47,10,94,10,"ordersData"],[47,20,94,20],[47,21,94,21,"push"],[47,25,94,25],[47,26,94,25,"Object"],[47,32,94,25],[47,33,94,25,"assign"],[47,39,94,25],[48,12,95,12,"id"],[48,14,95,14],[48,16,95,16,"doc"],[48,19,95,19],[48,20,95,20,"id"],[49,10,95,22],[49,13,96,15,"doc"],[49,16,96,18],[49,17,96,19,"data"],[49,21,96,23],[49,22,96,24],[49,23,96,25],[49,24,97,20],[49,25,97,21],[50,8,98,8],[50,9,98,9],[50,10,98,10],[51,8,100,8,"console"],[51,15,100,15],[51,16,100,16,"log"],[51,19,100,19],[51,20,100,20],[51,39,100,39],[51,41,100,41,"ordersData"],[51,51,100,51],[51,52,100,52,"length"],[51,58,100,58],[51,59,100,59],[52,8,101,8,"setOrders"],[52,17,101,17],[52,18,101,18,"ordersData"],[52,28,101,28],[52,29,101,29],[53,8,102,8,"setLoading"],[53,18,102,18],[53,19,102,19],[53,24,102,24],[53,25,102,25],[54,6,103,6],[54,7,103,7],[54,9,104,7,"err"],[54,12,104,10],[54,16,104,15],[55,8,105,8,"console"],[55,15,105,15],[55,16,105,16,"error"],[55,21,105,21],[55,22,105,22],[55,48,105,48],[55,50,105,50,"err"],[55,53,105,53],[55,54,105,54],[56,8,106,8,"setError"],[56,16,106,16],[56,17,106,17,"err"],[56,20,106,20],[56,21,106,21,"message"],[56,28,106,28],[56,29,106,29],[57,8,107,8,"setLoading"],[57,18,107,18],[57,19,107,19],[57,24,107,24],[57,25,107,25],[58,6,108,6],[58,7,109,4],[58,8,109,5],[59,6,111,4],[59,13,111,11],[59,19,111,17,"unsubscribe"],[59,30,111,28],[59,31,111,29],[59,32,111,30],[60,4,112,2],[60,5,112,3],[60,7,112,5],[60,8,112,6,"user"],[60,12,112,10],[60,14,112,12,"statusFilter"],[60,26,112,24],[60,27,112,25],[60,28,112,26],[61,4,114,2],[61,10,114,8,"createOrder"],[61,21,114,19],[61,24,114,22],[61,30,114,29,"orderData"],[61,39,114,112],[61,43,114,117],[62,6,115,4],[62,10,115,8],[62,11,115,9,"user"],[62,15,115,13],[62,17,115,15],[62,23,115,21],[62,27,115,25,"Error"],[62,32,115,30],[62,33,115,31],[62,57,115,55],[62,58,115,56],[63,6,117,4],[63,10,117,8],[64,8,118,6],[65,8,119,6],[65,14,119,12,"counterRef"],[65,24,119,22],[65,27,119,25],[65,31,119,25,"doc"],[65,49,119,28],[65,50,119,28,"doc"],[65,53,119,28],[65,55,119,29,"db"],[65,70,119,31],[65,71,119,31,"db"],[65,73,119,31],[65,75,119,33],[65,85,119,43],[65,87,119,45],[65,95,119,53],[65,96,119,54],[66,8,120,6],[66,14,120,12,"counterSnap"],[66,25,120,23],[66,28,120,26],[66,34,120,32],[66,38,120,32,"getDoc"],[66,56,120,38],[66,57,120,38,"getDoc"],[66,63,120,38],[66,65,120,39,"counterRef"],[66,75,120,49],[66,76,120,50],[67,8,122,6],[67,12,122,10,"orderNumber"],[67,23,122,21],[67,26,122,24],[67,27,122,25],[68,8,123,6],[68,12,123,10,"counterSnap"],[68,23,123,21],[68,24,123,22,"exists"],[68,30,123,28],[68,31,123,29],[68,32,123,30],[68,34,123,32],[69,10,124,8,"orderNumber"],[69,21,124,19],[69,24,124,22],[69,25,124,23,"counterSnap"],[69,36,124,34],[69,37,124,35,"data"],[69,41,124,39],[69,42,124,40],[69,43,124,41],[69,44,124,42,"current"],[69,51,124,49],[69,55,124,53],[69,56,124,54],[69,60,124,58],[69,61,124,59],[70,8,125,6],[72,8,127,6],[73,8,128,6],[73,14,128,12],[73,18,128,12,"updateDoc"],[73,36,128,21],[73,37,128,21,"updateDoc"],[73,46,128,21],[73,48,128,22,"counterRef"],[73,58,128,32],[73,60,128,34],[74,10,129,8,"current"],[74,17,129,15],[74,19,129,17,"orderNumber"],[75,8,130,6],[75,9,130,7],[75,10,130,8],[77,8,132,6],[78,8,133,6],[78,14,133,12,"ordersRef"],[78,23,133,21],[78,26,133,24],[78,30,133,24,"collection"],[78,48,133,34],[78,49,133,34,"collection"],[78,59,133,34],[78,61,133,35,"db"],[78,76,133,37],[78,77,133,37,"db"],[78,79,133,37],[78,81,133,39],[78,90,133,48],[78,92,133,50,"user"],[78,96,133,54],[78,97,133,55,"uid"],[78,100,133,58],[78,102,133,60],[78,110,133,68],[78,111,133,69],[79,8,134,6],[79,14,134,12,"newOrder"],[79,22,134,20],[79,25,134,20,"Object"],[79,31,134,20],[79,32,134,20,"assign"],[79,38,134,20],[79,43,135,11,"orderData"],[79,52,135,20],[80,10,136,8,"orderNumber"],[80,21,136,19],[81,10,137,8,"userId"],[81,16,137,14],[81,18,137,16,"user"],[81,22,137,20],[81,23,137,21,"uid"],[81,26,137,24],[82,10,138,8,"status"],[82,16,138,14],[82,18,138,16],[82,27,138,25],[83,10,139,8,"statusAr"],[83,18,139,16],[83,20,139,18],[83,34,139,32],[84,10,140,8,"createdAt"],[84,19,140,17],[84,21,140,19,"Timestamp"],[84,39,140,28],[84,40,140,28,"Timestamp"],[84,49,140,28],[84,50,140,29,"now"],[84,53,140,32],[84,54,140,33],[84,55,140,34],[85,10,141,8,"updatedAt"],[85,19,141,17],[85,21,141,19,"Timestamp"],[85,39,141,28],[85,40,141,28,"Timestamp"],[85,49,141,28],[85,50,141,29,"now"],[85,53,141,32],[85,54,141,33],[86,8,141,34],[86,10,142,7],[87,8,144,6],[87,14,144,12,"docRef"],[87,20,144,18],[87,23,144,21],[87,29,144,27],[87,33,144,27,"addDoc"],[87,51,144,33],[87,52,144,33,"addDoc"],[87,58,144,33],[87,60,144,34,"ordersRef"],[87,69,144,43],[87,71,144,45,"newOrder"],[87,79,144,53],[87,80,144,54],[88,8,146,6,"console"],[88,15,146,13],[88,16,146,14,"log"],[88,19,146,17],[88,20,146,18],[88,38,146,36],[88,40,146,38,"docRef"],[88,46,146,44],[88,47,146,45,"id"],[88,49,146,47],[88,50,146,48],[89,8,147,6],[89,15,147,6,"Object"],[89,21,147,6],[89,22,147,6,"assign"],[89,28,147,6],[90,10,148,8,"id"],[90,12,148,10],[90,14,148,12,"docRef"],[90,20,148,18],[90,21,148,19,"id"],[91,8,148,21],[91,11,149,11,"newOrder"],[91,19,149,19],[92,6,151,4],[92,7,151,5],[92,8,151,6],[92,15,151,13,"err"],[92,18,151,21],[92,20,151,23],[93,8,152,6,"console"],[93,15,152,13],[93,16,152,14,"error"],[93,21,152,19],[93,22,152,20],[93,47,152,45],[93,49,152,47,"err"],[93,52,152,50],[93,53,152,51],[94,8,153,6],[94,14,153,12,"err"],[94,17,153,15],[95,6,154,4],[96,4,155,2],[96,5,155,3],[97,4,157,2],[97,10,157,8,"updateOrderStatus"],[97,27,157,25],[97,30,157,28],[97,36,157,28,"updateOrderStatus"],[97,37,157,35,"orderId"],[97,44,157,50],[97,46,157,52,"status"],[97,52,157,66],[97,54,157,68,"statusAr"],[97,62,157,84],[97,67,157,89],[98,6,158,4],[98,10,158,8],[98,11,158,9,"user"],[98,15,158,13],[98,17,158,15],[98,23,158,21],[98,27,158,25,"Error"],[98,32,158,30],[98,33,158,31],[98,57,158,55],[98,58,158,56],[99,6,160,4],[99,10,160,8],[100,8,161,6],[100,14,161,12,"orderRef"],[100,22,161,20],[100,25,161,23],[100,29,161,23,"doc"],[100,47,161,26],[100,48,161,26,"doc"],[100,51,161,26],[100,53,161,27,"db"],[100,68,161,29],[100,69,161,29,"db"],[100,71,161,29],[100,73,161,31],[100,82,161,40],[100,84,161,42,"user"],[100,88,161,46],[100,89,161,47,"uid"],[100,92,161,50],[100,94,161,52],[100,102,161,60],[100,104,161,62,"orderId"],[100,111,161,69],[100,112,161,70],[101,8,162,6],[101,14,162,12],[101,18,162,12,"updateDoc"],[101,36,162,21],[101,37,162,21,"updateDoc"],[101,46,162,21],[101,48,162,22,"orderRef"],[101,56,162,30],[101,58,162,32],[102,10,163,8,"status"],[102,16,163,14],[103,10,164,8,"statusAr"],[103,18,164,16],[104,10,165,8,"updatedAt"],[104,19,165,17],[104,21,165,19,"Timestamp"],[104,39,165,28],[104,40,165,28,"Timestamp"],[104,49,165,28],[104,50,165,29,"now"],[104,53,165,32],[104,54,165,33],[105,8,166,6],[105,9,166,7],[105,10,166,8],[106,8,168,6,"console"],[106,15,168,13],[106,16,168,14,"log"],[106,19,168,17],[106,20,168,18],[106,45,168,43],[106,47,168,45,"orderId"],[106,54,168,52],[106,56,168,54,"status"],[106,62,168,60],[106,63,168,61],[107,6,169,4],[107,7,169,5],[107,8,169,6],[107,15,169,13,"err"],[107,18,169,21],[107,20,169,23],[108,8,170,6,"console"],[108,15,170,13],[108,16,170,14,"error"],[108,21,170,19],[108,22,170,20],[108,54,170,52],[108,56,170,54,"err"],[108,59,170,57],[108,60,170,58],[109,8,171,6],[109,14,171,12,"err"],[109,17,171,15],[110,6,172,4],[111,4,173,2],[111,5,173,3],[112,4,175,2],[112,11,175,9],[113,6,176,4,"orders"],[113,12,176,10],[114,6,177,4,"loading"],[114,13,177,11],[115,6,178,4,"error"],[115,11,178,9],[116,6,179,4,"createOrder"],[116,17,179,15],[117,6,180,4,"updateOrderStatus"],[118,4,181,2],[118,5,181,3],[119,2,182,0],[119,3,182,1],[120,2,182,2,"_s"],[120,4,182,2],[120,5,61,13,"useOrders"],[120,14,61,22],[121,4,61,22],[121,12,62,19,"useAuth"],[121,32,62,26],[121,33,62,26,"useAuth"],[121,40,62,26],[122,2,62,26],[123,0,62,26],[123,3]],"functionMap":{"names":["<global>","useOrders","useEffect$argument_0","onSnapshot$argument_1","snapshot.forEach$argument_0","onSnapshot$argument_2","<anonymous>","createOrder","updateOrderStatus"],"mappings":"AAA;yBC4D;YCM;MCwB;yBCE;SDK;ODK;MGC;OHI;WIG,mBJ;GDC;sBME;GNyC;4BOE;GPgB;CDS"},"hasCjsExports":false},"type":"js/module"}]}