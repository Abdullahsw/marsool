{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":87,"index":132}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":133},"end":{"line":3,"column":40,"index":173}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useProducts\", {\n    enumerable: true,\n    get: function () {\n      return useProducts;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  const useProducts = (categoryId, limitCount = 20) => {\n    const [products, setProducts] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      fetchProducts();\n    }, [categoryId, limitCount]);\n    const fetchProducts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Simplified query without compound index requirement\n        const q = (0, _firebaseFirestore.query)((0, _firebaseFirestore.collection)(_configFirebase.db, 'products'), (0, _firebaseFirestore.limit)(100) // Get more products and filter in code\n        );\n        const querySnapshot = await (0, _firebaseFirestore.getDocs)(q);\n        const productsData = [];\n        querySnapshot.forEach(doc => {\n          const data = doc.data();\n\n          // Filter by category in code (if categoryId is provided and not 'all')\n          if (categoryId && categoryId !== 'all') {\n            // Check if product belongs to selected category\n            const productCategories = data.categories || [];\n            const productCategoryId = data.categoryId || '';\n\n            // Skip if doesn't match category\n            if (!productCategories.includes(categoryId) && productCategoryId !== categoryId) {\n              return;\n            }\n          }\n\n          // Handle multi-language name\n          let productName = '';\n          if (typeof data.name === 'string') {\n            productName = data.name;\n          } else if (data.name && typeof data.name === 'object') {\n            productName = data.name.ar || data.name.en || data.name.ku || '';\n          }\n\n          // Handle multi-language description\n          let productDescription = '';\n          if (typeof data.description === 'string') {\n            productDescription = data.description;\n          } else if (data.description && typeof data.description === 'object') {\n            productDescription = data.description.ar || data.description.en || data.description.ku || '';\n          }\n\n          // Get image URL - handle both single imageUrl and images array\n          let imageUrl = '';\n          if (data.imageUrl) {\n            imageUrl = data.imageUrl;\n          } else if (data.images && Array.isArray(data.images) && data.images.length > 0) {\n            imageUrl = data.images[0];\n          }\n\n          // Get status badge - use custom badge from Firebase or default based on stock\n          let statusText = '';\n          let statusBadge = data.badge; // Custom badge from Firebase (like \"حصري\", \"جديد\", etc.)\n\n          if (statusBadge && typeof statusBadge === 'object') {\n            // Handle multi-language badge\n            statusText = statusBadge.ar || statusBadge.en || statusBadge.ku || '';\n          } else if (typeof statusBadge === 'string') {\n            statusText = statusBadge;\n          } else {\n            // Default status based on stock\n            const stock = data.stock || 0;\n            if (stock > 20) {\n              statusText = 'متوفر';\n            } else if (stock > 0) {\n              statusText = 'كمية محدودة';\n            } else {\n              statusText = 'غير متوفر';\n            }\n          }\n          productsData.push({\n            id: doc.id,\n            name: productName,\n            imageUrl: imageUrl,\n            wholesalePrice: data.wholesalePrice || 0,\n            tags: data.tags || [],\n            status: statusText,\n            category: data.category,\n            stock: data.stock || 0,\n            minOrder: data.minOrder || 1,\n            description: productDescription\n          });\n        });\n\n        // Sort by creation date and limit results\n        productsData.sort((a, b) => {\n          // Since we can't sort by createdAt in query, we'll show all for now\n          return 0;\n        });\n\n        // Apply limit\n        const limitedProducts = productsData.slice(0, limitCount);\n        setProducts(limitedProducts);\n      } catch (err) {\n        console.error('Error fetching products:', err);\n        setError(err.message || 'حدث خطأ في جلب المنتجات');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refetch = () => {\n      fetchProducts();\n    };\n    return {\n      products,\n      loading,\n      error,\n      refetch\n    };\n  };\n});","lineCount":132,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"useProducts"],[10,24,18,0],[11,4,18,0],[12,2,18,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_firebaseFirestore"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,3,0],[15,6,3,0,"_configFirebase"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,18,7],[16,8,18,13,"useProducts"],[16,19,18,24],[16,22,18,27,"useProducts"],[16,23,18,28,"categoryId"],[16,33,18,47],[16,35,18,49,"limitCount"],[16,45,18,67],[16,48,18,70],[16,50,18,72],[16,55,18,77],[17,4,19,2],[17,10,19,8],[17,11,19,9,"products"],[17,19,19,17],[17,21,19,19,"setProducts"],[17,32,19,30],[17,33,19,31],[17,36,19,34],[17,40,19,34,"useState"],[17,46,19,42],[17,47,19,42,"useState"],[17,55,19,42],[17,57,19,54],[17,59,19,56],[17,60,19,57],[18,4,20,2],[18,10,20,8],[18,11,20,9,"loading"],[18,18,20,16],[18,20,20,18,"setLoading"],[18,30,20,28],[18,31,20,29],[18,34,20,32],[18,38,20,32,"useState"],[18,44,20,40],[18,45,20,40,"useState"],[18,53,20,40],[18,55,20,41],[18,59,20,45],[18,60,20,46],[19,4,21,2],[19,10,21,8],[19,11,21,9,"error"],[19,16,21,14],[19,18,21,16,"setError"],[19,26,21,24],[19,27,21,25],[19,30,21,28],[19,34,21,28,"useState"],[19,40,21,36],[19,41,21,36,"useState"],[19,49,21,36],[19,51,21,52],[19,55,21,56],[19,56,21,57],[20,4,23,2],[20,8,23,2,"useEffect"],[20,14,23,11],[20,15,23,11,"useEffect"],[20,24,23,11],[20,26,23,12],[20,32,23,18],[21,6,24,4,"fetchProducts"],[21,19,24,17],[21,20,24,18],[21,21,24,19],[22,4,25,2],[22,5,25,3],[22,7,25,5],[22,8,25,6,"categoryId"],[22,18,25,16],[22,20,25,18,"limitCount"],[22,30,25,28],[22,31,25,29],[22,32,25,30],[23,4,27,2],[23,10,27,8,"fetchProducts"],[23,23,27,21],[23,26,27,24],[23,32,27,24,"fetchProducts"],[23,33,27,24],[23,38,27,36],[24,6,28,4],[24,10,28,8],[25,8,29,6,"setLoading"],[25,18,29,16],[25,19,29,17],[25,23,29,21],[25,24,29,22],[26,8,30,6,"setError"],[26,16,30,14],[26,17,30,15],[26,21,30,19],[26,22,30,20],[28,8,32,6],[29,8,33,6],[29,14,33,12,"q"],[29,15,33,13],[29,18,33,16],[29,22,33,16,"query"],[29,40,33,21],[29,41,33,21,"query"],[29,46,33,21],[29,48,34,8],[29,52,34,8,"collection"],[29,70,34,18],[29,71,34,18,"collection"],[29,81,34,18],[29,83,34,19,"db"],[29,98,34,21],[29,99,34,21,"db"],[29,101,34,21],[29,103,34,23],[29,113,34,33],[29,114,34,34],[29,116,35,8],[29,120,35,8,"limit"],[29,138,35,13],[29,139,35,13,"limit"],[29,144,35,13],[29,146,35,14],[29,149,35,17],[29,150,35,18],[29,151,35,19],[30,8,36,6],[30,9,36,7],[31,8,38,6],[31,14,38,12,"querySnapshot"],[31,27,38,25],[31,30,38,28],[31,36,38,34],[31,40,38,34,"getDocs"],[31,58,38,41],[31,59,38,41,"getDocs"],[31,66,38,41],[31,68,38,42,"q"],[31,69,38,43],[31,70,38,44],[32,8,39,6],[32,14,39,12,"productsData"],[32,26,39,35],[32,29,39,38],[32,31,39,40],[33,8,41,6,"querySnapshot"],[33,21,41,19],[33,22,41,20,"forEach"],[33,29,41,27],[33,30,41,29,"doc"],[33,33,41,32],[33,37,41,37],[34,10,42,8],[34,16,42,14,"data"],[34,20,42,18],[34,23,42,21,"doc"],[34,26,42,24],[34,27,42,25,"data"],[34,31,42,29],[34,32,42,30],[34,33,42,31],[36,10,44,8],[37,10,45,8],[37,14,45,12,"categoryId"],[37,24,45,22],[37,28,45,26,"categoryId"],[37,38,45,36],[37,43,45,41],[37,48,45,46],[37,50,45,48],[38,12,46,10],[39,12,47,10],[39,18,47,16,"productCategories"],[39,35,47,33],[39,38,47,36,"data"],[39,42,47,40],[39,43,47,41,"categories"],[39,53,47,51],[39,57,47,55],[39,59,47,57],[40,12,48,10],[40,18,48,16,"productCategoryId"],[40,35,48,33],[40,38,48,36,"data"],[40,42,48,40],[40,43,48,41,"categoryId"],[40,53,48,51],[40,57,48,55],[40,59,48,57],[42,12,50,10],[43,12,51,10],[43,16,51,14],[43,17,51,15,"productCategories"],[43,34,51,32],[43,35,51,33,"includes"],[43,43,51,41],[43,44,51,42,"categoryId"],[43,54,51,52],[43,55,51,53],[43,59,51,57,"productCategoryId"],[43,76,51,74],[43,81,51,79,"categoryId"],[43,91,51,89],[43,93,51,91],[44,14,52,12],[45,12,53,10],[46,10,54,8],[48,10,56,8],[49,10,57,8],[49,14,57,12,"productName"],[49,25,57,23],[49,28,57,26],[49,30,57,28],[50,10,58,8],[50,14,58,12],[50,21,58,19,"data"],[50,25,58,23],[50,26,58,24,"name"],[50,30,58,28],[50,35,58,33],[50,43,58,41],[50,45,58,43],[51,12,59,10,"productName"],[51,23,59,21],[51,26,59,24,"data"],[51,30,59,28],[51,31,59,29,"name"],[51,35,59,33],[52,10,60,8],[52,11,60,9],[52,17,60,15],[52,21,60,19,"data"],[52,25,60,23],[52,26,60,24,"name"],[52,30,60,28],[52,34,60,32],[52,41,60,39,"data"],[52,45,60,43],[52,46,60,44,"name"],[52,50,60,48],[52,55,60,53],[52,63,60,61],[52,65,60,63],[53,12,61,10,"productName"],[53,23,61,21],[53,26,61,24,"data"],[53,30,61,28],[53,31,61,29,"name"],[53,35,61,33],[53,36,61,34,"ar"],[53,38,61,36],[53,42,61,40,"data"],[53,46,61,44],[53,47,61,45,"name"],[53,51,61,49],[53,52,61,50,"en"],[53,54,61,52],[53,58,61,56,"data"],[53,62,61,60],[53,63,61,61,"name"],[53,67,61,65],[53,68,61,66,"ku"],[53,70,61,68],[53,74,61,72],[53,76,61,74],[54,10,62,8],[56,10,64,8],[57,10,65,8],[57,14,65,12,"productDescription"],[57,32,65,30],[57,35,65,33],[57,37,65,35],[58,10,66,8],[58,14,66,12],[58,21,66,19,"data"],[58,25,66,23],[58,26,66,24,"description"],[58,37,66,35],[58,42,66,40],[58,50,66,48],[58,52,66,50],[59,12,67,10,"productDescription"],[59,30,67,28],[59,33,67,31,"data"],[59,37,67,35],[59,38,67,36,"description"],[59,49,67,47],[60,10,68,8],[60,11,68,9],[60,17,68,15],[60,21,68,19,"data"],[60,25,68,23],[60,26,68,24,"description"],[60,37,68,35],[60,41,68,39],[60,48,68,46,"data"],[60,52,68,50],[60,53,68,51,"description"],[60,64,68,62],[60,69,68,67],[60,77,68,75],[60,79,68,77],[61,12,69,10,"productDescription"],[61,30,69,28],[61,33,69,31,"data"],[61,37,69,35],[61,38,69,36,"description"],[61,49,69,47],[61,50,69,48,"ar"],[61,52,69,50],[61,56,69,54,"data"],[61,60,69,58],[61,61,69,59,"description"],[61,72,69,70],[61,73,69,71,"en"],[61,75,69,73],[61,79,69,77,"data"],[61,83,69,81],[61,84,69,82,"description"],[61,95,69,93],[61,96,69,94,"ku"],[61,98,69,96],[61,102,69,100],[61,104,69,102],[62,10,70,8],[64,10,72,8],[65,10,73,8],[65,14,73,12,"imageUrl"],[65,22,73,20],[65,25,73,23],[65,27,73,25],[66,10,74,8],[66,14,74,12,"data"],[66,18,74,16],[66,19,74,17,"imageUrl"],[66,27,74,25],[66,29,74,27],[67,12,75,10,"imageUrl"],[67,20,75,18],[67,23,75,21,"data"],[67,27,75,25],[67,28,75,26,"imageUrl"],[67,36,75,34],[68,10,76,8],[68,11,76,9],[68,17,76,15],[68,21,76,19,"data"],[68,25,76,23],[68,26,76,24,"images"],[68,32,76,30],[68,36,76,34,"Array"],[68,41,76,39],[68,42,76,40,"isArray"],[68,49,76,47],[68,50,76,48,"data"],[68,54,76,52],[68,55,76,53,"images"],[68,61,76,59],[68,62,76,60],[68,66,76,64,"data"],[68,70,76,68],[68,71,76,69,"images"],[68,77,76,75],[68,78,76,76,"length"],[68,84,76,82],[68,87,76,85],[68,88,76,86],[68,90,76,88],[69,12,77,10,"imageUrl"],[69,20,77,18],[69,23,77,21,"data"],[69,27,77,25],[69,28,77,26,"images"],[69,34,77,32],[69,35,77,33],[69,36,77,34],[69,37,77,35],[70,10,78,8],[72,10,80,8],[73,10,81,8],[73,14,81,12,"statusText"],[73,24,81,22],[73,27,81,25],[73,29,81,27],[74,10,82,8],[74,14,82,12,"statusBadge"],[74,25,82,23],[74,28,82,26,"data"],[74,32,82,30],[74,33,82,31,"badge"],[74,38,82,36],[74,39,82,37],[74,40,82,38],[76,10,84,8],[76,14,84,12,"statusBadge"],[76,25,84,23],[76,29,84,27],[76,36,84,34,"statusBadge"],[76,47,84,45],[76,52,84,50],[76,60,84,58],[76,62,84,60],[77,12,85,10],[78,12,86,10,"statusText"],[78,22,86,20],[78,25,86,23,"statusBadge"],[78,36,86,34],[78,37,86,35,"ar"],[78,39,86,37],[78,43,86,41,"statusBadge"],[78,54,86,52],[78,55,86,53,"en"],[78,57,86,55],[78,61,86,59,"statusBadge"],[78,72,86,70],[78,73,86,71,"ku"],[78,75,86,73],[78,79,86,77],[78,81,86,79],[79,10,87,8],[79,11,87,9],[79,17,87,15],[79,21,87,19],[79,28,87,26,"statusBadge"],[79,39,87,37],[79,44,87,42],[79,52,87,50],[79,54,87,52],[80,12,88,10,"statusText"],[80,22,88,20],[80,25,88,23,"statusBadge"],[80,36,88,34],[81,10,89,8],[81,11,89,9],[81,17,89,15],[82,12,90,10],[83,12,91,10],[83,18,91,16,"stock"],[83,23,91,21],[83,26,91,24,"data"],[83,30,91,28],[83,31,91,29,"stock"],[83,36,91,34],[83,40,91,38],[83,41,91,39],[84,12,92,10],[84,16,92,14,"stock"],[84,21,92,19],[84,24,92,22],[84,26,92,24],[84,28,92,26],[85,14,93,12,"statusText"],[85,24,93,22],[85,27,93,25],[85,34,93,32],[86,12,94,10],[86,13,94,11],[86,19,94,17],[86,23,94,21,"stock"],[86,28,94,26],[86,31,94,29],[86,32,94,30],[86,34,94,32],[87,14,95,12,"statusText"],[87,24,95,22],[87,27,95,25],[87,40,95,38],[88,12,96,10],[88,13,96,11],[88,19,96,17],[89,14,97,12,"statusText"],[89,24,97,22],[89,27,97,25],[89,38,97,36],[90,12,98,10],[91,10,99,8],[92,10,101,8,"productsData"],[92,22,101,20],[92,23,101,21,"push"],[92,27,101,25],[92,28,101,26],[93,12,102,10,"id"],[93,14,102,12],[93,16,102,14,"doc"],[93,19,102,17],[93,20,102,18,"id"],[93,22,102,20],[94,12,103,10,"name"],[94,16,103,14],[94,18,103,16,"productName"],[94,29,103,27],[95,12,104,10,"imageUrl"],[95,20,104,18],[95,22,104,20,"imageUrl"],[95,30,104,28],[96,12,105,10,"wholesalePrice"],[96,26,105,24],[96,28,105,26,"data"],[96,32,105,30],[96,33,105,31,"wholesalePrice"],[96,47,105,45],[96,51,105,49],[96,52,105,50],[97,12,106,10,"tags"],[97,16,106,14],[97,18,106,16,"data"],[97,22,106,20],[97,23,106,21,"tags"],[97,27,106,25],[97,31,106,29],[97,33,106,31],[98,12,107,10,"status"],[98,18,107,16],[98,20,107,18,"statusText"],[98,30,107,28],[99,12,108,10,"category"],[99,20,108,18],[99,22,108,20,"data"],[99,26,108,24],[99,27,108,25,"category"],[99,35,108,33],[100,12,109,10,"stock"],[100,17,109,15],[100,19,109,17,"data"],[100,23,109,21],[100,24,109,22,"stock"],[100,29,109,27],[100,33,109,31],[100,34,109,32],[101,12,110,10,"minOrder"],[101,20,110,18],[101,22,110,20,"data"],[101,26,110,24],[101,27,110,25,"minOrder"],[101,35,110,33],[101,39,110,37],[101,40,110,38],[102,12,111,10,"description"],[102,23,111,21],[102,25,111,23,"productDescription"],[103,10,112,8],[103,11,112,9],[103,12,112,10],[104,8,113,6],[104,9,113,7],[104,10,113,8],[106,8,115,6],[107,8,116,6,"productsData"],[107,20,116,18],[107,21,116,19,"sort"],[107,25,116,23],[107,26,116,24],[107,27,116,25,"a"],[107,28,116,26],[107,30,116,28,"b"],[107,31,116,29],[107,36,116,34],[108,10,117,8],[109,10,118,8],[109,17,118,15],[109,18,118,16],[110,8,119,6],[110,9,119,7],[110,10,119,8],[112,8,121,6],[113,8,122,6],[113,14,122,12,"limitedProducts"],[113,29,122,27],[113,32,122,30,"productsData"],[113,44,122,42],[113,45,122,43,"slice"],[113,50,122,48],[113,51,122,49],[113,52,122,50],[113,54,122,52,"limitCount"],[113,64,122,62],[113,65,122,63],[114,8,124,6,"setProducts"],[114,19,124,17],[114,20,124,18,"limitedProducts"],[114,35,124,33],[114,36,124,34],[115,6,125,4],[115,7,125,5],[115,8,125,6],[115,15,125,13,"err"],[115,18,125,21],[115,20,125,23],[116,8,126,6,"console"],[116,15,126,13],[116,16,126,14,"error"],[116,21,126,19],[116,22,126,20],[116,48,126,46],[116,50,126,48,"err"],[116,53,126,51],[116,54,126,52],[117,8,127,6,"setError"],[117,16,127,14],[117,17,127,15,"err"],[117,20,127,18],[117,21,127,19,"message"],[117,28,127,26],[117,32,127,30],[117,57,127,55],[117,58,127,56],[118,6,128,4],[118,7,128,5],[118,16,128,14],[119,8,129,6,"setLoading"],[119,18,129,16],[119,19,129,17],[119,24,129,22],[119,25,129,23],[120,6,130,4],[121,4,131,2],[121,5,131,3],[122,4,133,2],[122,10,133,8,"refetch"],[122,17,133,15],[122,20,133,18,"refetch"],[122,21,133,18],[122,26,133,24],[123,6,134,4,"fetchProducts"],[123,19,134,17],[123,20,134,18],[123,21,134,19],[124,4,135,2],[124,5,135,3],[125,4,137,2],[125,11,137,9],[126,6,137,11,"products"],[126,14,137,19],[127,6,137,21,"loading"],[127,13,137,28],[128,6,137,30,"error"],[128,11,137,35],[129,6,137,37,"refetch"],[130,4,137,45],[130,5,137,46],[131,2,138,0],[131,3,138,1],[132,0,138,2],[132,3]],"functionMap":{"names":["<global>","useProducts","useEffect$argument_0","fetchProducts","querySnapshot.forEach$argument_0","productsData.sort$argument_0","refetch"],"mappings":"AAA;2BCiB;YCK;GDE;wBEE;4BCc;ODwE;wBEG;OFG;GFY;kBKE;GLE;CDG"},"hasCjsExports":false},"type":"js/module"}]}