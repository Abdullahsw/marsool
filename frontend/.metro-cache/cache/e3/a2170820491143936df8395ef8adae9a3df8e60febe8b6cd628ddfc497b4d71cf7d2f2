{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":15,"column":28,"index":219}}],"key":"n8ZdwTgQb9oFW01pH/SKxYwC/nA=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":220},"end":{"line":16,"column":40,"index":260}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":261},"end":{"line":17,"column":50,"index":311}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useOrders\", {\n    enumerable: true,\n    get: function () {\n      return useOrders;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _firebaseFirestore = require(_dependencyMap[1], \"firebase/firestore\");\n  var _configFirebase = require(_dependencyMap[2], \"../config/firebase\");\n  var _contextsAuthContext = require(_dependencyMap[3], \"../contexts/AuthContext\");\n  const useOrders = statusFilter => {\n    const {\n      user\n    } = (0, _contextsAuthContext.useAuth)();\n    const [orders, setOrders] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (!user) {\n        setOrders([]);\n        setLoading(false);\n        return;\n      }\n      setLoading(true);\n\n      // Build query\n      const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n      let q = (0, _firebaseFirestore.query)(ordersRef, (0, _firebaseFirestore.orderBy)('createdAt', 'desc'));\n\n      // Add status filter if provided\n      if (statusFilter && statusFilter !== 'all') {\n        q = (0, _firebaseFirestore.query)(q, (0, _firebaseFirestore.where)('status', '==', statusFilter));\n      }\n\n      // Subscribe to real-time updates\n      const unsubscribe = (0, _firebaseFirestore.onSnapshot)(q, snapshot => {\n        const ordersData = [];\n        snapshot.forEach(doc => {\n          ordersData.push({\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        console.log('üì¶ Orders loaded:', ordersData.length);\n        setOrders(ordersData);\n        setLoading(false);\n      }, err => {\n        console.error('‚ùå Error fetching orders:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n      return () => unsubscribe();\n    }, [user, statusFilter]);\n    const createOrder = async orderData => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        // Get next order number from counter\n        const counterRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'counters', 'orders');\n        const counterSnap = await (0, _firebaseFirestore.getDoc)(counterRef);\n        let orderNumber = 1;\n        if (counterSnap.exists()) {\n          orderNumber = (counterSnap.data().current || 0) + 1;\n        }\n\n        // Update counter\n        await (0, _firebaseFirestore.updateDoc)(counterRef, {\n          current: orderNumber\n        });\n\n        // Create order\n        const ordersRef = (0, _firebaseFirestore.collection)(_configFirebase.db, 'traders', user.uid, 'orders');\n        const newOrder = {\n          ...orderData,\n          orderNumber,\n          userId: user.uid,\n          status: 'pending',\n          statusAr: 'ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',\n          createdAt: _firebaseFirestore.Timestamp.now(),\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        };\n        const docRef = await (0, _firebaseFirestore.addDoc)(ordersRef, newOrder);\n        console.log('‚úÖ Order created:', docRef.id);\n        return {\n          id: docRef.id,\n          ...newOrder\n        };\n      } catch (err) {\n        console.error('‚ùå Error creating order:', err);\n        throw err;\n      }\n    };\n    const updateOrderStatus = async (orderId, status, statusAr) => {\n      if (!user) throw new Error('User not authenticated');\n      try {\n        const orderRef = (0, _firebaseFirestore.doc)(_configFirebase.db, 'traders', user.uid, 'orders', orderId);\n        await (0, _firebaseFirestore.updateDoc)(orderRef, {\n          status,\n          statusAr,\n          updatedAt: _firebaseFirestore.Timestamp.now()\n        });\n        console.log('‚úÖ Order status updated:', orderId, status);\n      } catch (err) {\n        console.error('‚ùå Error updating order status:', err);\n        throw err;\n      }\n    };\n    return {\n      orders,\n      loading,\n      error,\n      createOrder,\n      updateOrderStatus\n    };\n  };\n});","lineCount":121,"map":[[7,2,61,0,"Object"],[7,8,61,0],[7,9,61,0,"defineProperty"],[7,23,61,0],[7,24,61,0,"exports"],[7,31,61,0],[8,4,61,0,"enumerable"],[8,14,61,0],[9,4,61,0,"get"],[9,7,61,0],[9,18,61,0,"get"],[9,19,61,0],[10,6,61,0],[10,13,61,0,"useOrders"],[10,22,61,0],[11,4,61,0],[12,2,61,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_firebaseFirestore"],[14,24,2,0],[14,27,2,0,"require"],[14,34,2,0],[14,35,2,0,"_dependencyMap"],[14,49,2,0],[15,2,16,0],[15,6,16,0,"_configFirebase"],[15,21,16,0],[15,24,16,0,"require"],[15,31,16,0],[15,32,16,0,"_dependencyMap"],[15,46,16,0],[16,2,17,0],[16,6,17,0,"_contextsAuthContext"],[16,26,17,0],[16,29,17,0,"require"],[16,36,17,0],[16,37,17,0,"_dependencyMap"],[16,51,17,0],[17,2,61,7],[17,8,61,13,"useOrders"],[17,17,61,22],[17,20,61,26,"statusFilter"],[17,32,61,47],[17,36,61,52],[18,4,62,2],[18,10,62,8],[19,6,62,10,"user"],[20,4,62,15],[20,5,62,16],[20,8,62,19],[20,12,62,19,"useAuth"],[20,32,62,26],[20,33,62,26,"useAuth"],[20,40,62,26],[20,42,62,27],[20,43,62,28],[21,4,63,2],[21,10,63,8],[21,11,63,9,"orders"],[21,17,63,15],[21,19,63,17,"setOrders"],[21,28,63,26],[21,29,63,27],[21,32,63,30],[21,36,63,30,"useState"],[21,42,63,38],[21,43,63,38,"useState"],[21,51,63,38],[21,53,63,48],[21,55,63,50],[21,56,63,51],[22,4,64,2],[22,10,64,8],[22,11,64,9,"loading"],[22,18,64,16],[22,20,64,18,"setLoading"],[22,30,64,28],[22,31,64,29],[22,34,64,32],[22,38,64,32,"useState"],[22,44,64,40],[22,45,64,40,"useState"],[22,53,64,40],[22,55,64,41],[22,59,64,45],[22,60,64,46],[23,4,65,2],[23,10,65,8],[23,11,65,9,"error"],[23,16,65,14],[23,18,65,16,"setError"],[23,26,65,24],[23,27,65,25],[23,30,65,28],[23,34,65,28,"useState"],[23,40,65,36],[23,41,65,36,"useState"],[23,49,65,36],[23,51,65,52],[23,55,65,56],[23,56,65,57],[24,4,67,2],[24,8,67,2,"useEffect"],[24,14,67,11],[24,15,67,11,"useEffect"],[24,24,67,11],[24,26,67,12],[24,32,67,18],[25,6,68,4],[25,10,68,8],[25,11,68,9,"user"],[25,15,68,13],[25,17,68,15],[26,8,69,6,"setOrders"],[26,17,69,15],[26,18,69,16],[26,20,69,18],[26,21,69,19],[27,8,70,6,"setLoading"],[27,18,70,16],[27,19,70,17],[27,24,70,22],[27,25,70,23],[28,8,71,6],[29,6,72,4],[30,6,74,4,"setLoading"],[30,16,74,14],[30,17,74,15],[30,21,74,19],[30,22,74,20],[32,6,76,4],[33,6,77,4],[33,12,77,10,"ordersRef"],[33,21,77,19],[33,24,77,22],[33,28,77,22,"collection"],[33,46,77,32],[33,47,77,32,"collection"],[33,57,77,32],[33,59,77,33,"db"],[33,74,77,35],[33,75,77,35,"db"],[33,77,77,35],[33,79,77,37],[33,88,77,46],[33,90,77,48,"user"],[33,94,77,52],[33,95,77,53,"uid"],[33,98,77,56],[33,100,77,58],[33,108,77,66],[33,109,77,67],[34,6,78,4],[34,10,78,8,"q"],[34,11,78,9],[34,14,78,12],[34,18,78,12,"query"],[34,36,78,17],[34,37,78,17,"query"],[34,42,78,17],[34,44,79,6,"ordersRef"],[34,53,79,15],[34,55,80,6],[34,59,80,6,"orderBy"],[34,77,80,13],[34,78,80,13,"orderBy"],[34,85,80,13],[34,87,80,14],[34,98,80,25],[34,100,80,27],[34,106,80,33],[34,107,81,4],[34,108,81,5],[36,6,83,4],[37,6,84,4],[37,10,84,8,"statusFilter"],[37,22,84,20],[37,26,84,24,"statusFilter"],[37,38,84,36],[37,43,84,41],[37,48,84,46],[37,50,84,48],[38,8,85,6,"q"],[38,9,85,7],[38,12,85,10],[38,16,85,10,"query"],[38,34,85,15],[38,35,85,15,"query"],[38,40,85,15],[38,42,85,16,"q"],[38,43,85,17],[38,45,85,19],[38,49,85,19,"where"],[38,67,85,24],[38,68,85,24,"where"],[38,73,85,24],[38,75,85,25],[38,83,85,33],[38,85,85,35],[38,89,85,39],[38,91,85,41,"statusFilter"],[38,103,85,53],[38,104,85,54],[38,105,85,55],[39,6,86,4],[41,6,88,4],[42,6,89,4],[42,12,89,10,"unsubscribe"],[42,23,89,21],[42,26,89,24],[42,30,89,24,"onSnapshot"],[42,48,89,34],[42,49,89,34,"onSnapshot"],[42,59,89,34],[42,61,90,6,"q"],[42,62,90,7],[42,64,91,7,"snapshot"],[42,72,91,15],[42,76,91,20],[43,8,92,8],[43,14,92,14,"ordersData"],[43,24,92,33],[43,27,92,36],[43,29,92,38],[44,8,93,8,"snapshot"],[44,16,93,16],[44,17,93,17,"forEach"],[44,24,93,24],[44,25,93,26,"doc"],[44,28,93,29],[44,32,93,34],[45,10,94,10,"ordersData"],[45,20,94,20],[45,21,94,21,"push"],[45,25,94,25],[45,26,94,26],[46,12,95,12,"id"],[46,14,95,14],[46,16,95,16,"doc"],[46,19,95,19],[46,20,95,20,"id"],[46,22,95,22],[47,12,96,12],[47,15,96,15,"doc"],[47,18,96,18],[47,19,96,19,"data"],[47,23,96,23],[47,24,96,24],[48,10,97,10],[48,11,97,20],[48,12,97,21],[49,8,98,8],[49,9,98,9],[49,10,98,10],[50,8,100,8,"console"],[50,15,100,15],[50,16,100,16,"log"],[50,19,100,19],[50,20,100,20],[50,39,100,39],[50,41,100,41,"ordersData"],[50,51,100,51],[50,52,100,52,"length"],[50,58,100,58],[50,59,100,59],[51,8,101,8,"setOrders"],[51,17,101,17],[51,18,101,18,"ordersData"],[51,28,101,28],[51,29,101,29],[52,8,102,8,"setLoading"],[52,18,102,18],[52,19,102,19],[52,24,102,24],[52,25,102,25],[53,6,103,6],[53,7,103,7],[53,9,104,7,"err"],[53,12,104,10],[53,16,104,15],[54,8,105,8,"console"],[54,15,105,15],[54,16,105,16,"error"],[54,21,105,21],[54,22,105,22],[54,48,105,48],[54,50,105,50,"err"],[54,53,105,53],[54,54,105,54],[55,8,106,8,"setError"],[55,16,106,16],[55,17,106,17,"err"],[55,20,106,20],[55,21,106,21,"message"],[55,28,106,28],[55,29,106,29],[56,8,107,8,"setLoading"],[56,18,107,18],[56,19,107,19],[56,24,107,24],[56,25,107,25],[57,6,108,6],[57,7,109,4],[57,8,109,5],[58,6,111,4],[58,13,111,11],[58,19,111,17,"unsubscribe"],[58,30,111,28],[58,31,111,29],[58,32,111,30],[59,4,112,2],[59,5,112,3],[59,7,112,5],[59,8,112,6,"user"],[59,12,112,10],[59,14,112,12,"statusFilter"],[59,26,112,24],[59,27,112,25],[59,28,112,26],[60,4,114,2],[60,10,114,8,"createOrder"],[60,21,114,19],[60,24,114,22],[60,30,114,29,"orderData"],[60,39,114,112],[60,43,114,117],[61,6,115,4],[61,10,115,8],[61,11,115,9,"user"],[61,15,115,13],[61,17,115,15],[61,23,115,21],[61,27,115,25,"Error"],[61,32,115,30],[61,33,115,31],[61,57,115,55],[61,58,115,56],[62,6,117,4],[62,10,117,8],[63,8,118,6],[64,8,119,6],[64,14,119,12,"counterRef"],[64,24,119,22],[64,27,119,25],[64,31,119,25,"doc"],[64,49,119,28],[64,50,119,28,"doc"],[64,53,119,28],[64,55,119,29,"db"],[64,70,119,31],[64,71,119,31,"db"],[64,73,119,31],[64,75,119,33],[64,85,119,43],[64,87,119,45],[64,95,119,53],[64,96,119,54],[65,8,120,6],[65,14,120,12,"counterSnap"],[65,25,120,23],[65,28,120,26],[65,34,120,32],[65,38,120,32,"getDoc"],[65,56,120,38],[65,57,120,38,"getDoc"],[65,63,120,38],[65,65,120,39,"counterRef"],[65,75,120,49],[65,76,120,50],[66,8,122,6],[66,12,122,10,"orderNumber"],[66,23,122,21],[66,26,122,24],[66,27,122,25],[67,8,123,6],[67,12,123,10,"counterSnap"],[67,23,123,21],[67,24,123,22,"exists"],[67,30,123,28],[67,31,123,29],[67,32,123,30],[67,34,123,32],[68,10,124,8,"orderNumber"],[68,21,124,19],[68,24,124,22],[68,25,124,23,"counterSnap"],[68,36,124,34],[68,37,124,35,"data"],[68,41,124,39],[68,42,124,40],[68,43,124,41],[68,44,124,42,"current"],[68,51,124,49],[68,55,124,53],[68,56,124,54],[68,60,124,58],[68,61,124,59],[69,8,125,6],[71,8,127,6],[72,8,128,6],[72,14,128,12],[72,18,128,12,"updateDoc"],[72,36,128,21],[72,37,128,21,"updateDoc"],[72,46,128,21],[72,48,128,22,"counterRef"],[72,58,128,32],[72,60,128,34],[73,10,129,8,"current"],[73,17,129,15],[73,19,129,17,"orderNumber"],[74,8,130,6],[74,9,130,7],[74,10,130,8],[76,8,132,6],[77,8,133,6],[77,14,133,12,"ordersRef"],[77,23,133,21],[77,26,133,24],[77,30,133,24,"collection"],[77,48,133,34],[77,49,133,34,"collection"],[77,59,133,34],[77,61,133,35,"db"],[77,76,133,37],[77,77,133,37,"db"],[77,79,133,37],[77,81,133,39],[77,90,133,48],[77,92,133,50,"user"],[77,96,133,54],[77,97,133,55,"uid"],[77,100,133,58],[77,102,133,60],[77,110,133,68],[77,111,133,69],[78,8,134,6],[78,14,134,12,"newOrder"],[78,22,134,20],[78,25,134,23],[79,10,135,8],[79,13,135,11,"orderData"],[79,22,135,20],[80,10,136,8,"orderNumber"],[80,21,136,19],[81,10,137,8,"userId"],[81,16,137,14],[81,18,137,16,"user"],[81,22,137,20],[81,23,137,21,"uid"],[81,26,137,24],[82,10,138,8,"status"],[82,16,138,14],[82,18,138,16],[82,27,138,25],[83,10,139,8,"statusAr"],[83,18,139,16],[83,20,139,18],[83,34,139,32],[84,10,140,8,"createdAt"],[84,19,140,17],[84,21,140,19,"Timestamp"],[84,39,140,28],[84,40,140,28,"Timestamp"],[84,49,140,28],[84,50,140,29,"now"],[84,53,140,32],[84,54,140,33],[84,55,140,34],[85,10,141,8,"updatedAt"],[85,19,141,17],[85,21,141,19,"Timestamp"],[85,39,141,28],[85,40,141,28,"Timestamp"],[85,49,141,28],[85,50,141,29,"now"],[85,53,141,32],[85,54,141,33],[86,8,142,6],[86,9,142,7],[87,8,144,6],[87,14,144,12,"docRef"],[87,20,144,18],[87,23,144,21],[87,29,144,27],[87,33,144,27,"addDoc"],[87,51,144,33],[87,52,144,33,"addDoc"],[87,58,144,33],[87,60,144,34,"ordersRef"],[87,69,144,43],[87,71,144,45,"newOrder"],[87,79,144,53],[87,80,144,54],[88,8,146,6,"console"],[88,15,146,13],[88,16,146,14,"log"],[88,19,146,17],[88,20,146,18],[88,38,146,36],[88,40,146,38,"docRef"],[88,46,146,44],[88,47,146,45,"id"],[88,49,146,47],[88,50,146,48],[89,8,147,6],[89,15,147,13],[90,10,148,8,"id"],[90,12,148,10],[90,14,148,12,"docRef"],[90,20,148,18],[90,21,148,19,"id"],[90,23,148,21],[91,10,149,8],[91,13,149,11,"newOrder"],[92,8,150,6],[92,9,150,7],[93,6,151,4],[93,7,151,5],[93,8,151,6],[93,15,151,13,"err"],[93,18,151,21],[93,20,151,23],[94,8,152,6,"console"],[94,15,152,13],[94,16,152,14,"error"],[94,21,152,19],[94,22,152,20],[94,47,152,45],[94,49,152,47,"err"],[94,52,152,50],[94,53,152,51],[95,8,153,6],[95,14,153,12,"err"],[95,17,153,15],[96,6,154,4],[97,4,155,2],[97,5,155,3],[98,4,157,2],[98,10,157,8,"updateOrderStatus"],[98,27,157,25],[98,30,157,28],[98,36,157,28,"updateOrderStatus"],[98,37,157,35,"orderId"],[98,44,157,50],[98,46,157,52,"status"],[98,52,157,66],[98,54,157,68,"statusAr"],[98,62,157,84],[98,67,157,89],[99,6,158,4],[99,10,158,8],[99,11,158,9,"user"],[99,15,158,13],[99,17,158,15],[99,23,158,21],[99,27,158,25,"Error"],[99,32,158,30],[99,33,158,31],[99,57,158,55],[99,58,158,56],[100,6,160,4],[100,10,160,8],[101,8,161,6],[101,14,161,12,"orderRef"],[101,22,161,20],[101,25,161,23],[101,29,161,23,"doc"],[101,47,161,26],[101,48,161,26,"doc"],[101,51,161,26],[101,53,161,27,"db"],[101,68,161,29],[101,69,161,29,"db"],[101,71,161,29],[101,73,161,31],[101,82,161,40],[101,84,161,42,"user"],[101,88,161,46],[101,89,161,47,"uid"],[101,92,161,50],[101,94,161,52],[101,102,161,60],[101,104,161,62,"orderId"],[101,111,161,69],[101,112,161,70],[102,8,162,6],[102,14,162,12],[102,18,162,12,"updateDoc"],[102,36,162,21],[102,37,162,21,"updateDoc"],[102,46,162,21],[102,48,162,22,"orderRef"],[102,56,162,30],[102,58,162,32],[103,10,163,8,"status"],[103,16,163,14],[104,10,164,8,"statusAr"],[104,18,164,16],[105,10,165,8,"updatedAt"],[105,19,165,17],[105,21,165,19,"Timestamp"],[105,39,165,28],[105,40,165,28,"Timestamp"],[105,49,165,28],[105,50,165,29,"now"],[105,53,165,32],[105,54,165,33],[106,8,166,6],[106,9,166,7],[106,10,166,8],[107,8,168,6,"console"],[107,15,168,13],[107,16,168,14,"log"],[107,19,168,17],[107,20,168,18],[107,45,168,43],[107,47,168,45,"orderId"],[107,54,168,52],[107,56,168,54,"status"],[107,62,168,60],[107,63,168,61],[108,6,169,4],[108,7,169,5],[108,8,169,6],[108,15,169,13,"err"],[108,18,169,21],[108,20,169,23],[109,8,170,6,"console"],[109,15,170,13],[109,16,170,14,"error"],[109,21,170,19],[109,22,170,20],[109,54,170,52],[109,56,170,54,"err"],[109,59,170,57],[109,60,170,58],[110,8,171,6],[110,14,171,12,"err"],[110,17,171,15],[111,6,172,4],[112,4,173,2],[112,5,173,3],[113,4,175,2],[113,11,175,9],[114,6,176,4,"orders"],[114,12,176,10],[115,6,177,4,"loading"],[115,13,177,11],[116,6,178,4,"error"],[116,11,178,9],[117,6,179,4,"createOrder"],[117,17,179,15],[118,6,180,4,"updateOrderStatus"],[119,4,181,2],[119,5,181,3],[120,2,182,0],[120,3,182,1],[121,0,182,2],[121,3]],"functionMap":{"names":["<global>","useOrders","useEffect$argument_0","onSnapshot$argument_1","snapshot.forEach$argument_0","onSnapshot$argument_2","<anonymous>","createOrder","updateOrderStatus"],"mappings":"AAA;yBC4D;YCM;MCwB;yBCE;SDK;ODK;MGC;OHI;WIG,mBJ;GDC;sBME;GNyC;4BOE;GPgB;CDS"},"hasCjsExports":false},"type":"js/module"}]}